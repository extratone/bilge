/*
THIS IS A GENERATED/BUNDLED FILE BY ROLLUP
if you want to view the source visit the plugins github repository
*/

'use strict';

var obsidian = require('obsidian');

/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */

function __awaiter(thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
}

class EmbedFlattener {
    constructor(app, increaseLevelOfEmbeddedHeadings, removeYAML, convertWikiLinks, convertReferencesForBaseURL, baseURL, pageSeparator, headingLevel) {
        this.app = app;
        this.increaseLevelOfEmbeddedHeadings = increaseLevelOfEmbeddedHeadings;
        this.removeYAML = removeYAML;
        this.convertWikiLinks = convertWikiLinks;
        this.convertReferencesForBaseURL = convertReferencesForBaseURL;
        this.baseURL = baseURL;
        this.pageSeparator = pageSeparator;
        this.headingLevel = headingLevel;
        this.page = 1;
        this.headings = {};
    }
    flatten(file, depth = 0) {
        return __awaiter(this, void 0, void 0, function* () {
            var fileContents = yield this.app.vault.read(file);
            const metadata = this.app.metadataCache.getFileCache(file);
            var replacements = [];
            if (metadata.headings && this.convertReferencesForBaseURL) {
                metadata.headings.forEach((heading) => {
                    if (heading.level + (this.increaseLevelOfEmbeddedHeadings ? depth : 0) == this.headingLevel) {
                        var location = heading.position.start.offset;
                        var useLocation = false;
                        var inBlock = false;
                        while (location > 0) {
                            location -= 1;
                            if (inBlock) {
                                if (fileContents[location] == '[') {
                                    useLocation = true;
                                    break;
                                }
                                else if (fileContents[location] == ']') {
                                    break;
                                }
                            }
                            else if (/\s/.test(fileContents[location])) {
                                continue;
                            }
                            else if (fileContents[location] == ']') {
                                inBlock = true;
                            }
                            else {
                                break;
                            }
                        }
                        replacements.push({
                            start: useLocation ? location : heading.position.start.offset,
                            end: useLocation ? location : heading.position.start.offset,
                            string: `\n${this.pageSeparator}\n`
                        });
                    }
                });
            }
            if (metadata.headings && this.increaseLevelOfEmbeddedHeadings && depth > 0) {
                metadata.headings.forEach((heading) => {
                    if (heading.level < 6) {
                        const hashIndex = fileContents.indexOf("#", heading.position.start.offset);
                        replacements.push({
                            start: hashIndex,
                            end: hashIndex,
                            string: "#".repeat(Math.max(Math.min(heading.level + depth, 6) - heading.level, 0))
                        });
                    }
                });
            }
            if (this.removeYAML && metadata.frontmatter) {
                replacements.push({
                    start: metadata.frontmatter.position.start.offset,
                    end: metadata.frontmatter.position.end.offset,
                    string: ''
                });
            }
            if (metadata.embeds) {
                for (const embed of metadata.embeds) {
                    const linkpath = obsidian.getLinkpath(embed.link);
                    const linkedFile = this.app.metadataCache.getFirstLinkpathDest(linkpath, file.path);
                    if (linkedFile && linkedFile.extension.toLowerCase() == "md") {
                        const flattenedLinkedFileContents = yield this.flatten(linkedFile, Math.min(depth + 1, 6));
                        replacements.push({
                            start: embed.position.start.offset,
                            end: embed.position.end.offset,
                            string: flattenedLinkedFileContents + '\n'
                        });
                    }
                }
            }
            replacements.sort((a, b) => a.start - b.start);
            replacements.reverse().forEach((replacement) => {
                fileContents = fileContents.substring(0, replacement.start) + replacement.string + fileContents.substring(replacement.end);
            });
            return fileContents.trim();
        });
    }
    replaceLinks(fileContents) {
        var _a;
        const linkRegex = /\[\[(?:([^#\n\]]+)#)?([^\]\n|]+)(?:\|([^\]\n]+))?\]\]/g;
        var newFileContents = fileContents;
        var replacements = [];
        var match;
        while ((match = linkRegex.exec(fileContents)) !== null) {
            let link = match[2];
            if (this.convertReferencesForBaseURL) {
                let split = fileContents.split('# ' + link);
                if (split.length < 2) {
                    console.log('Linked section "' + link + '" not found!');
                }
                else if (split.length > 2) {
                    new obsidian.Notice('Linked section "' + link + '" found more than once!');
                    console.log('Linked section "' + link + '" found more than once!');
                }
                else {
                    let page = (split[0].substring(0, split[0].length - 1).match(new RegExp(this.pageSeparator, 'g')) || []).length + 1;
                    let title = (_a = match[3]) !== null && _a !== void 0 ? _a : (match[1] ? `${match[1]} â‡¾ ${link}` : link);
                    replacements.push({
                        start: match.index,
                        end: match.index + match[0].length,
                        string: `[${title}](${this.baseURL}/${page}/#${link.toLowerCase().split(' ').join('-').replace(',', '').replace('\'', '')})`
                    });
                }
            }
            else if (this.convertWikiLinks) {
                replacements.push({
                    start: match.index,
                    end: match.index + match[0].length,
                    string: `[${link}](${encodeURI(`obsidian://open?vault=${this.app.vault.getName()}&file=${link}.md`)})`
                });
            }
        }
        replacements.sort((a, b) => a.start - b.start);
        replacements.reverse().forEach((replacement) => {
            newFileContents = newFileContents.substring(0, replacement.start) + replacement.string + newFileContents.substring(replacement.end);
        });
        return newFileContents.trim();
    }
}

class SettingsModal extends obsidian.Modal {
    constructor(plugin) {
        super(plugin.app);
        this.plugin = plugin;
        this.saveLocation = "Obsidian";
        this.increaseLevelOfEmbeddedHeadings = true;
        this.removeYAML = true;
        this.convertReferencesForBaseURL = false;
    }
    onOpen() {
        let { contentEl } = this;
        const saveLocation = new obsidian.Setting(contentEl);
        saveLocation.setName("Save location");
        saveLocation.addDropdown((dropdown) => {
            dropdown.addOption("Obsidian", "Obsidian");
            dropdown.addOption("Clipboard", "Clipboard");
            dropdown.setValue(this.saveLocation);
            dropdown.onChange((value) => { this.saveLocation = value; });
        });
        const increaseHeaders = new obsidian.Setting(contentEl);
        increaseHeaders.setName("Increase headings of referenced notes");
        increaseHeaders.addToggle((toggle) => {
            toggle.setValue(this.increaseLevelOfEmbeddedHeadings);
            toggle.onChange((value) => { this.increaseLevelOfEmbeddedHeadings = value; });
        });
        const removeYAML = new obsidian.Setting(contentEl);
        removeYAML.setName("Remove YAML");
        removeYAML.addToggle((toggle) => {
            toggle.setValue(this.removeYAML);
            toggle.onChange((value) => { this.removeYAML = value; });
        });
        const baseURLExport = new obsidian.Setting(contentEl);
        baseURLExport.setName("Convert references using baseURL");
        baseURLExport.addToggle((toggle) => {
            toggle.setValue(this.convertReferencesForBaseURL);
            toggle.onChange((value) => { this.convertReferencesForBaseURL = value; });
        });
        const saveButton = new obsidian.Setting(contentEl);
        saveButton.addButton((button) => {
            button.setButtonText("Save");
            button.setCta();
            button.onClick((event) => __awaiter(this, void 0, void 0, function* () {
                var _a;
                const activeFile = this.app.workspace.getActiveFile();
                const metadata = this.app.metadataCache.getFileCache(activeFile);
                if (this.convertReferencesForBaseURL && (!metadata.frontmatter || !metadata.frontmatter['baseURL'])) {
                    new obsidian.Notice('No Base URL Found');
                    this.close();
                    return;
                }
                const embedFlattener = new EmbedFlattener(this.app, this.increaseLevelOfEmbeddedHeadings, this.removeYAML, this.saveLocation != "Obsidian" && !this.convertReferencesForBaseURL, this.convertReferencesForBaseURL, (_a = metadata.frontmatter) === null || _a === void 0 ? void 0 : _a['baseURL'], this.plugin.settings.pageSeparator, parseInt(this.plugin.settings.headingLevel[1]));
                const flattened = yield embedFlattener.flatten(activeFile);
                const flattenedLinked = embedFlattener.replaceLinks(flattened);
                switch (this.saveLocation) {
                    case "Obsidian":
                        const newFileParent = this.app.fileManager.getNewFileParent(activeFile.path);
                        var firstHeading;
                        var headings = metadata.headings;
                        if (headings) {
                            firstHeading = headings.find((heading) => heading.level == 1);
                        }
                        var fileName = "Untitled.md";
                        var num = 1;
                        if (firstHeading) {
                            fileName = `${firstHeading.heading}.md`;
                            while (yield this.app.vault.adapter.exists(newFileParent.path + fileName)) {
                                fileName = `${firstHeading.heading} ${num}.md`;
                                num++;
                            }
                        }
                        else {
                            while (yield this.app.vault.adapter.exists(newFileParent.path + fileName)) {
                                fileName = `Untitled ${num}.md`;
                                num++;
                            }
                        }
                        yield this.app.vault.create(newFileParent.path + fileName, flattenedLinked);
                        yield this.app.workspace.openLinkText(newFileParent.path + fileName, "");
                        new obsidian.Notice(`Exported to ${fileName}!`);
                        break;
                    case "Clipboard":
                        navigator.clipboard.writeText(flattenedLinked);
                        new obsidian.Notice("Exported to Clipboard!");
                        break;
                }
                this.close();
            }));
        });
    }
    onClose() {
        let { contentEl } = this;
        contentEl.empty();
    }
}

const DEFAULT_SETTINGS = {
    pageSeparator: '<!--nextpage-->',
    headingLevel: 'H2'
};
class ExportPlugin extends obsidian.Plugin {
    onload() {
        return __awaiter(this, void 0, void 0, function* () {
            yield this.loadSettings();
            obsidian.addIcon('share-export', '<path d="M38.1609646,27.386905 C40.1107263,27.386905 41.6913204,28.9674991 41.6913204,30.9172608 C41.6913204,32.7973881 40.2216098,34.3342462 38.3683998,34.4416236 L38.1609646,34.4476166 L28.1682857,34.4476166 C23.8526504,34.4476166 20.4999744,37.3040026 20.3498091,40.6480766 L20.3445567,40.8821456 L20.3445567,79.2032472 C20.3445567,82.5687232 23.5991502,85.5015973 27.8687854,85.6331714 L28.1682857,85.6377761 L71.8317143,85.6377761 C76.1473496,85.6377761 79.5000256,82.7813901 79.6501909,79.4373161 L79.6554433,79.2032472 L79.6554433,40.8821456 C79.6554433,37.5230318 76.4126677,34.5936975 72.1601567,34.4528866 L71.8618597,34.4476166 L61.8390354,34.4476166 C59.8892737,34.4476166 58.3086796,32.8670225 58.3086796,30.9172608 C58.3086796,29.0371334 59.7783902,27.5002754 61.6316002,27.392898 L61.8390354,27.386905 L71.8699314,27.386905 C79.8567962,27.4051752 86.5117038,33.1539657 86.7115341,40.5400994 L86.7161549,40.8821456 L86.7161549,79.2032472 C86.7161549,86.6518186 80.1603597,92.5183535 72.2000899,92.6944173 L71.8317143,92.6984878 L28.1682857,92.6984878 C20.1660205,92.6984878 13.4889788,86.9448101 13.2884813,79.5458891 L13.2838451,79.2032472 L13.2838451,40.8821456 C13.2838451,33.4335741 19.8396403,27.5670393 27.7999101,27.3909754 L28.1682857,27.386905 L38.1609646,27.386905 Z" id="Path" fill="currentColor" fill-rule="nonzero"></path><line x1="50.1114536" y1="53" x2="50.1114536" y2="10.4081181" id="Line" stroke="currentColor" stroke-width="6" stroke-linecap="round"></line><line x1="40.3995367" y1="20.120035" x2="50.1114536" y2="10.4081181" id="Line" stroke="currentColor" stroke-width="6" stroke-linecap="round"></line><line x1="50.2229073" y1="20.120035" x2="59.9348242" y2="10.4081181" id="Line" stroke="currentColor" stroke-width="6" stroke-linecap="round" transform="translate(54.967412, 15.375530) scale(-1, 1) translate(-54.967412, -15.375530) "></line>');
            obsidian.addIcon('share-macstories', '<path d="M38.1609646,27.386905 C40.1107263,27.386905 41.6913204,28.9674991 41.6913204,30.9172608 C41.6913204,32.7973881 40.2216098,34.3342462 38.3683998,34.4416236 L38.1609646,34.4476166 L28.1682857,34.4476166 C23.8526504,34.4476166 20.4999744,37.3040026 20.3498091,40.6480766 L20.3445567,40.8821456 L20.3445567,79.2032472 C20.3445567,82.5687232 23.5991502,85.5015973 27.8687854,85.6331714 L28.1682857,85.6377761 L71.8317143,85.6377761 C76.1473496,85.6377761 79.5000256,82.7813901 79.6501909,79.4373161 L79.6554433,79.2032472 L79.6554433,40.8821456 C79.6554433,37.5230318 76.4126677,34.5936975 72.1601567,34.4528866 L71.8618597,34.4476166 L61.8390354,34.4476166 C59.8892737,34.4476166 58.3086796,32.8670225 58.3086796,30.9172608 C58.3086796,29.0371334 59.7783902,27.5002754 61.6316002,27.392898 L61.8390354,27.386905 L71.8699314,27.386905 C79.8567962,27.4051752 86.5117038,33.1539657 86.7115341,40.5400994 L86.7161549,40.8821456 L86.7161549,79.2032472 C86.7161549,86.6518186 80.1603597,92.5183535 72.2000899,92.6944173 L71.8317143,92.6984878 L28.1682857,92.6984878 C20.1660205,92.6984878 13.4889788,86.9448101 13.2884813,79.5458891 L13.2838451,79.2032472 L13.2838451,40.8821456 C13.2838451,33.4335741 19.8396403,27.5670393 27.7999101,27.3909754 L28.1682857,27.386905 L38.1609646,27.386905 Z" id="Path" fill="currentColor" fill-rule="nonzero"></path><line x1="50.1114536" y1="32.4893815" x2="50.1114536" y2="10.4081181" id="Line" stroke="currentColor" stroke-width="6" stroke-linecap="round"></line><path d="M62.2385669,38.8605614 L37.7614331,38.8605614 C36.461592,38.8605614 35.4078626,39.9142908 35.4078626,41.2141319 L35.4078626,78.8712608 L35.4142174,79.0506115 C35.5488523,80.935995 37.7928187,81.921374 39.2771846,80.6717584 L49.9988232,71.6445579 L60.7228154,80.6717584 C62.2535678,81.9604244 64.5921374,80.8722262 64.5921374,78.8712608 L64.5921374,41.2141319 C64.5921374,39.9142908 63.538408,38.8605614 62.2385669,38.8605614 Z M59.8849963,43.567638 L59.8849963,73.8133732 L51.5157515,66.7677086 L51.3571443,66.6452288 C50.4906467,66.0328297 49.3086841,66.0736563 48.4842485,66.7677086 L40.1150037,73.8121964 L40.1150037,43.567638 L59.8849963,43.567638 Z" id="Rectangle" fill="currentColor" fill-rule="nonzero"></path><line x1="40.3995367" y1="20.120035" x2="50.1114536" y2="10.4081181" id="Line" stroke="currentColor" stroke-width="6" stroke-linecap="round"></line><line x1="50.2229073" y1="20.120035" x2="59.9348242" y2="10.4081181" id="Line" stroke="currentColor" stroke-width="6" stroke-linecap="round" transform="translate(54.967412, 15.375530) scale(-1, 1) translate(-54.967412, -15.375530) "></line>');
            this.addSettingTab(new ExportPluginSettingTab(this.app, this));
            this.addCommand({
                id: 'export-markdown-with-embeds',
                name: 'Export Markdown with Embeds',
                icon: 'share-export',
                callback: () => {
                    const file = this.app.workspace.getActiveFile();
                    if (file !== null) {
                        new SettingsModal(this).open();
                        return true;
                    }
                    return false;
                }
            });
            if (this.app.isMobile) {
                this.addCommand({
                    id: 'share-markdown-with-embeds',
                    name: 'Share Markdown with Embeds',
                    icon: 'share-export',
                    callback: () => __awaiter(this, void 0, void 0, function* () {
                        const file = this.app.workspace.getActiveFile();
                        if (file !== null) {
                            const embedFlattener = new EmbedFlattener(this.app, true, true, true, false, '', '', 0);
                            const flattened = yield embedFlattener.flatten(file);
                            const flattenedLinked = embedFlattener.replaceLinks(flattened);
                            const share = {
                                text: flattenedLinked,
                            };
                            navigator.share(share);
                            return true;
                        }
                        return false;
                    })
                });
                this.addCommand({
                    id: 'share-markdown-with-embeds-baseURL',
                    name: 'Share Markdown with Embeds with baseURL',
                    icon: 'share-macstories',
                    callback: () => __awaiter(this, void 0, void 0, function* () {
                        var _a;
                        const file = this.app.workspace.getActiveFile();
                        if (file !== null) {
                            const metadata = this.app.metadataCache.getFileCache(file);
                            if ((_a = metadata.frontmatter) === null || _a === void 0 ? void 0 : _a['baseURL']) {
                                const embedFlattener = new EmbedFlattener(this.app, true, true, false, true, metadata.frontmatter['baseURL'], this.settings.pageSeparator, parseInt(this.settings.headingLevel[1]));
                                const flattened = yield embedFlattener.flatten(file);
                                const flattenedLinked = embedFlattener.replaceLinks(flattened);
                                const share = {
                                    text: flattenedLinked,
                                };
                                navigator.share(share);
                                return true;
                            }
                            else {
                                new obsidian.Notice('No baseURL specified.');
                                return false;
                            }
                        }
                        return false;
                    })
                });
            }
        });
    }
    loadSettings() {
        return __awaiter(this, void 0, void 0, function* () {
            this.settings = Object.assign({}, DEFAULT_SETTINGS, yield this.loadData());
        });
    }
    saveSettings() {
        return __awaiter(this, void 0, void 0, function* () {
            yield this.saveData(this.settings);
        });
    }
}
class ExportPluginSettingTab extends obsidian.PluginSettingTab {
    constructor(app, plugin) {
        super(app, plugin);
        this.plugin = plugin;
    }
    display() {
        let { containerEl } = this;
        containerEl.empty();
        containerEl.createEl('h2', { text: 'Settings for the Export Markdown with Embeds plugin.' });
        new obsidian.Setting(containerEl)
            .setName('Page separator')
            .setDesc('The text to insert between pages when exporting with baseURL.')
            .addText(text => text
            .setPlaceholder('e.x. <!--nextpage-->')
            .setValue(this.plugin.settings.pageSeparator)
            .onChange((value) => __awaiter(this, void 0, void 0, function* () {
            this.plugin.settings.pageSeparator = value;
            yield this.plugin.saveSettings();
        })));
        new obsidian.Setting(containerEl)
            .setName('New page heading level')
            .setDesc('The heading level that marks the start of a new page.')
            .addDropdown(dropdown => dropdown
            .addOption('H1', 'H1')
            .addOption('H2', 'H2')
            .addOption('H3', 'H3')
            .addOption('H4', 'H4')
            .addOption('H5', 'H5')
            .addOption('H6', 'H6')
            .setValue(this.plugin.settings.headingLevel)
            .onChange((value) => __awaiter(this, void 0, void 0, function* () {
            this.plugin.settings.headingLevel = value;
            yield this.plugin.saveSettings();
        })));
    }
}

module.exports = ExportPlugin;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXMiOlsibm9kZV9tb2R1bGVzL3RzbGliL3RzbGliLmVzNi5qcyIsInNyYy9FbWJlZEZsYXR0ZW5lci50cyIsInNyYy9TZXR0aW5nc01vZGFsLnRzIiwic3JjL21haW4udHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyohICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbkNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLlxyXG5cclxuUGVybWlzc2lvbiB0byB1c2UsIGNvcHksIG1vZGlmeSwgYW5kL29yIGRpc3RyaWJ1dGUgdGhpcyBzb2Z0d2FyZSBmb3IgYW55XHJcbnB1cnBvc2Ugd2l0aCBvciB3aXRob3V0IGZlZSBpcyBoZXJlYnkgZ3JhbnRlZC5cclxuXHJcblRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIgQU5EIFRIRSBBVVRIT1IgRElTQ0xBSU1TIEFMTCBXQVJSQU5USUVTIFdJVEhcclxuUkVHQVJEIFRPIFRISVMgU09GVFdBUkUgSU5DTFVESU5HIEFMTCBJTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZXHJcbkFORCBGSVRORVNTLiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SIEJFIExJQUJMRSBGT1IgQU5ZIFNQRUNJQUwsIERJUkVDVCxcclxuSU5ESVJFQ1QsIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyBPUiBBTlkgREFNQUdFUyBXSEFUU09FVkVSIFJFU1VMVElORyBGUk9NXHJcbkxPU1MgT0YgVVNFLCBEQVRBIE9SIFBST0ZJVFMsIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBORUdMSUdFTkNFIE9SXHJcbk9USEVSIFRPUlRJT1VTIEFDVElPTiwgQVJJU0lORyBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBVU0UgT1JcclxuUEVSRk9STUFOQ0UgT0YgVEhJUyBTT0ZUV0FSRS5cclxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cclxuLyogZ2xvYmFsIFJlZmxlY3QsIFByb21pc2UgKi9cclxuXHJcbnZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24oZCwgYikge1xyXG4gICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19leHRlbmRzKGQsIGIpIHtcclxuICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXHJcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xyXG4gICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG59XHJcblxyXG5leHBvcnQgdmFyIF9fYXNzaWduID0gZnVuY3Rpb24oKSB7XHJcbiAgICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gX19hc3NpZ24odCkge1xyXG4gICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpIHRbcF0gPSBzW3BdO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdDtcclxuICAgIH1cclxuICAgIHJldHVybiBfX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19yZXN0KHMsIGUpIHtcclxuICAgIHZhciB0ID0ge307XHJcbiAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkgJiYgZS5pbmRleE9mKHApIDwgMClcclxuICAgICAgICB0W3BdID0gc1twXTtcclxuICAgIGlmIChzICE9IG51bGwgJiYgdHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPT09IFwiZnVuY3Rpb25cIilcclxuICAgICAgICBmb3IgKHZhciBpID0gMCwgcCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMocyk7IGkgPCBwLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChlLmluZGV4T2YocFtpXSkgPCAwICYmIE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChzLCBwW2ldKSlcclxuICAgICAgICAgICAgICAgIHRbcFtpXV0gPSBzW3BbaV1dO1xyXG4gICAgICAgIH1cclxuICAgIHJldHVybiB0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xyXG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XHJcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xyXG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcGFyYW0ocGFyYW1JbmRleCwgZGVjb3JhdG9yKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCwga2V5KSB7IGRlY29yYXRvcih0YXJnZXQsIGtleSwgcGFyYW1JbmRleCk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fbWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpIHtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5tZXRhZGF0YSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gUmVmbGVjdC5tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2F3YWl0ZXIodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XHJcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cclxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxyXG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19nZW5lcmF0b3IodGhpc0FyZywgYm9keSkge1xyXG4gICAgdmFyIF8gPSB7IGxhYmVsOiAwLCBzZW50OiBmdW5jdGlvbigpIHsgaWYgKHRbMF0gJiAxKSB0aHJvdyB0WzFdOyByZXR1cm4gdFsxXTsgfSwgdHJ5czogW10sIG9wczogW10gfSwgZiwgeSwgdCwgZztcclxuICAgIHJldHVybiBnID0geyBuZXh0OiB2ZXJiKDApLCBcInRocm93XCI6IHZlcmIoMSksIFwicmV0dXJuXCI6IHZlcmIoMikgfSwgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIChnW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0pLCBnO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gc3RlcChbbiwgdl0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKG9wKSB7XHJcbiAgICAgICAgaWYgKGYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xyXG4gICAgICAgIHdoaWxlIChfKSB0cnkge1xyXG4gICAgICAgICAgICBpZiAoZiA9IDEsIHkgJiYgKHQgPSBvcFswXSAmIDIgPyB5W1wicmV0dXJuXCJdIDogb3BbMF0gPyB5W1widGhyb3dcIl0gfHwgKCh0ID0geVtcInJldHVyblwiXSkgJiYgdC5jYWxsKHkpLCAwKSA6IHkubmV4dCkgJiYgISh0ID0gdC5jYWxsKHksIG9wWzFdKSkuZG9uZSkgcmV0dXJuIHQ7XHJcbiAgICAgICAgICAgIGlmICh5ID0gMCwgdCkgb3AgPSBbb3BbMF0gJiAyLCB0LnZhbHVlXTtcclxuICAgICAgICAgICAgc3dpdGNoIChvcFswXSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOiBjYXNlIDE6IHQgPSBvcDsgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IF8ubGFiZWwrKzsgcmV0dXJuIHsgdmFsdWU6IG9wWzFdLCBkb25lOiBmYWxzZSB9O1xyXG4gICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA3OiBvcCA9IF8ub3BzLnBvcCgpOyBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDMgJiYgKCF0IHx8IChvcFsxXSA+IHRbMF0gJiYgb3BbMV0gPCB0WzNdKSkpIHsgXy5sYWJlbCA9IG9wWzFdOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gNiAmJiBfLmxhYmVsIDwgdFsxXSkgeyBfLmxhYmVsID0gdFsxXTsgdCA9IG9wOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodFsyXSkgXy5vcHMucG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvcCA9IGJvZHkuY2FsbCh0aGlzQXJnLCBfKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7IG9wID0gWzYsIGVdOyB5ID0gMDsgfSBmaW5hbGx5IHsgZiA9IHQgPSAwOyB9XHJcbiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCB2YXIgX19jcmVhdGVCaW5kaW5nID0gT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xyXG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBrMiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbVtrXTsgfSB9KTtcclxufSkgOiAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcclxuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XHJcbiAgICBvW2syXSA9IG1ba107XHJcbn0pO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXhwb3J0U3RhcihtLCBvKSB7XHJcbiAgICBmb3IgKHZhciBwIGluIG0pIGlmIChwICE9PSBcImRlZmF1bHRcIiAmJiAhT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG8sIHApKSBfX2NyZWF0ZUJpbmRpbmcobywgbSwgcCk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3ZhbHVlcyhvKSB7XHJcbiAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwO1xyXG4gICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7XHJcbiAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09IFwibnVtYmVyXCIpIHJldHVybiB7XHJcbiAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwO1xyXG4gICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/IFwiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS5cIiA6IFwiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVhZChvLCBuKSB7XHJcbiAgICB2YXIgbSA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl07XHJcbiAgICBpZiAoIW0pIHJldHVybiBvO1xyXG4gICAgdmFyIGkgPSBtLmNhbGwobyksIHIsIGFyID0gW10sIGU7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHdoaWxlICgobiA9PT0gdm9pZCAwIHx8IG4tLSA+IDApICYmICEociA9IGkubmV4dCgpKS5kb25lKSBhci5wdXNoKHIudmFsdWUpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGVycm9yKSB7IGUgPSB7IGVycm9yOiBlcnJvciB9OyB9XHJcbiAgICBmaW5hbGx5IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAociAmJiAhci5kb25lICYmIChtID0gaVtcInJldHVyblwiXSkpIG0uY2FsbChpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZmluYWxseSB7IGlmIChlKSB0aHJvdyBlLmVycm9yOyB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbi8qKiBAZGVwcmVjYXRlZCAqL1xyXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWQoKSB7XHJcbiAgICBmb3IgKHZhciBhciA9IFtdLCBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKylcclxuICAgICAgICBhciA9IGFyLmNvbmNhdChfX3JlYWQoYXJndW1lbnRzW2ldKSk7XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbi8qKiBAZGVwcmVjYXRlZCAqL1xyXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWRBcnJheXMoKSB7XHJcbiAgICBmb3IgKHZhciBzID0gMCwgaSA9IDAsIGlsID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGlsOyBpKyspIHMgKz0gYXJndW1lbnRzW2ldLmxlbmd0aDtcclxuICAgIGZvciAodmFyIHIgPSBBcnJheShzKSwgayA9IDAsIGkgPSAwOyBpIDwgaWw7IGkrKylcclxuICAgICAgICBmb3IgKHZhciBhID0gYXJndW1lbnRzW2ldLCBqID0gMCwgamwgPSBhLmxlbmd0aDsgaiA8IGpsOyBqKyssIGsrKylcclxuICAgICAgICAgICAgcltrXSA9IGFbal07XHJcbiAgICByZXR1cm4gcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkQXJyYXkodG8sIGZyb20sIHBhY2spIHtcclxuICAgIGlmIChwYWNrIHx8IGFyZ3VtZW50cy5sZW5ndGggPT09IDIpIGZvciAodmFyIGkgPSAwLCBsID0gZnJvbS5sZW5ndGgsIGFyOyBpIDwgbDsgaSsrKSB7XHJcbiAgICAgICAgaWYgKGFyIHx8ICEoaSBpbiBmcm9tKSkge1xyXG4gICAgICAgICAgICBpZiAoIWFyKSBhciA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20sIDAsIGkpO1xyXG4gICAgICAgICAgICBhcltpXSA9IGZyb21baV07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRvLmNvbmNhdChhciB8fCBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tKSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2F3YWl0KHYpIHtcclxuICAgIHJldHVybiB0aGlzIGluc3RhbmNlb2YgX19hd2FpdCA/ICh0aGlzLnYgPSB2LCB0aGlzKSA6IG5ldyBfX2F3YWl0KHYpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0dlbmVyYXRvcih0aGlzQXJnLCBfYXJndW1lbnRzLCBnZW5lcmF0b3IpIHtcclxuICAgIGlmICghU3ltYm9sLmFzeW5jSXRlcmF0b3IpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICB2YXIgZyA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSwgaSwgcSA9IFtdO1xyXG4gICAgcmV0dXJuIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiKSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IGlmIChnW25dKSBpW25dID0gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChhLCBiKSB7IHEucHVzaChbbiwgdiwgYSwgYl0pID4gMSB8fCByZXN1bWUobiwgdik7IH0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiByZXN1bWUobiwgdikgeyB0cnkgeyBzdGVwKGdbbl0odikpOyB9IGNhdGNoIChlKSB7IHNldHRsZShxWzBdWzNdLCBlKTsgfSB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKHIpIHsgci52YWx1ZSBpbnN0YW5jZW9mIF9fYXdhaXQgPyBQcm9taXNlLnJlc29sdmUoci52YWx1ZS52KS50aGVuKGZ1bGZpbGwsIHJlamVjdCkgOiBzZXR0bGUocVswXVsyXSwgcik7IH1cclxuICAgIGZ1bmN0aW9uIGZ1bGZpbGwodmFsdWUpIHsgcmVzdW1lKFwibmV4dFwiLCB2YWx1ZSk7IH1cclxuICAgIGZ1bmN0aW9uIHJlamVjdCh2YWx1ZSkgeyByZXN1bWUoXCJ0aHJvd1wiLCB2YWx1ZSk7IH1cclxuICAgIGZ1bmN0aW9uIHNldHRsZShmLCB2KSB7IGlmIChmKHYpLCBxLnNoaWZ0KCksIHEubGVuZ3RoKSByZXN1bWUocVswXVswXSwgcVswXVsxXSk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNEZWxlZ2F0b3Iobykge1xyXG4gICAgdmFyIGksIHA7XHJcbiAgICByZXR1cm4gaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIsIGZ1bmN0aW9uIChlKSB7IHRocm93IGU7IH0pLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuLCBmKSB7IGlbbl0gPSBvW25dID8gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIChwID0gIXApID8geyB2YWx1ZTogX19hd2FpdChvW25dKHYpKSwgZG9uZTogbiA9PT0gXCJyZXR1cm5cIiB9IDogZiA/IGYodikgOiB2OyB9IDogZjsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY1ZhbHVlcyhvKSB7XHJcbiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgdmFyIG0gPSBvW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSwgaTtcclxuICAgIHJldHVybiBtID8gbS5jYWxsKG8pIDogKG8gPSB0eXBlb2YgX192YWx1ZXMgPT09IFwiZnVuY3Rpb25cIiA/IF9fdmFsdWVzKG8pIDogb1tTeW1ib2wuaXRlcmF0b3JdKCksIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiKSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpKTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyBpW25dID0gb1tuXSAmJiBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgeyB2ID0gb1tuXSh2KSwgc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgdi5kb25lLCB2LnZhbHVlKTsgfSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHNldHRsZShyZXNvbHZlLCByZWplY3QsIGQsIHYpIHsgUHJvbWlzZS5yZXNvbHZlKHYpLnRoZW4oZnVuY3Rpb24odikgeyByZXNvbHZlKHsgdmFsdWU6IHYsIGRvbmU6IGQgfSk7IH0sIHJlamVjdCk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fbWFrZVRlbXBsYXRlT2JqZWN0KGNvb2tlZCwgcmF3KSB7XHJcbiAgICBpZiAoT2JqZWN0LmRlZmluZVByb3BlcnR5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjb29rZWQsIFwicmF3XCIsIHsgdmFsdWU6IHJhdyB9KTsgfSBlbHNlIHsgY29va2VkLnJhdyA9IHJhdzsgfVxyXG4gICAgcmV0dXJuIGNvb2tlZDtcclxufTtcclxuXHJcbnZhciBfX3NldE1vZHVsZURlZmF1bHQgPSBPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIHYpIHtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBcImRlZmF1bHRcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdiB9KTtcclxufSkgOiBmdW5jdGlvbihvLCB2KSB7XHJcbiAgICBvW1wiZGVmYXVsdFwiXSA9IHY7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnRTdGFyKG1vZCkge1xyXG4gICAgaWYgKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgcmV0dXJuIG1vZDtcclxuICAgIHZhciByZXN1bHQgPSB7fTtcclxuICAgIGlmIChtb2QgIT0gbnVsbCkgZm9yICh2YXIgayBpbiBtb2QpIGlmIChrICE9PSBcImRlZmF1bHRcIiAmJiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobW9kLCBrKSkgX19jcmVhdGVCaW5kaW5nKHJlc3VsdCwgbW9kLCBrKTtcclxuICAgIF9fc2V0TW9kdWxlRGVmYXVsdChyZXN1bHQsIG1vZCk7XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnREZWZhdWx0KG1vZCkge1xyXG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBkZWZhdWx0OiBtb2QgfTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fY2xhc3NQcml2YXRlRmllbGRHZXQocmVjZWl2ZXIsIHN0YXRlLCBraW5kLCBmKSB7XHJcbiAgICBpZiAoa2luZCA9PT0gXCJhXCIgJiYgIWYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIGFjY2Vzc29yIHdhcyBkZWZpbmVkIHdpdGhvdXQgYSBnZXR0ZXJcIik7XHJcbiAgICBpZiAodHlwZW9mIHN0YXRlID09PSBcImZ1bmN0aW9uXCIgPyByZWNlaXZlciAhPT0gc3RhdGUgfHwgIWYgOiAhc3RhdGUuaGFzKHJlY2VpdmVyKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCByZWFkIHByaXZhdGUgbWVtYmVyIGZyb20gYW4gb2JqZWN0IHdob3NlIGNsYXNzIGRpZCBub3QgZGVjbGFyZSBpdFwiKTtcclxuICAgIHJldHVybiBraW5kID09PSBcIm1cIiA/IGYgOiBraW5kID09PSBcImFcIiA/IGYuY2FsbChyZWNlaXZlcikgOiBmID8gZi52YWx1ZSA6IHN0YXRlLmdldChyZWNlaXZlcik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0KHJlY2VpdmVyLCBzdGF0ZSwgdmFsdWUsIGtpbmQsIGYpIHtcclxuICAgIGlmIChraW5kID09PSBcIm1cIikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByaXZhdGUgbWV0aG9kIGlzIG5vdCB3cml0YWJsZVwiKTtcclxuICAgIGlmIChraW5kID09PSBcImFcIiAmJiAhZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByaXZhdGUgYWNjZXNzb3Igd2FzIGRlZmluZWQgd2l0aG91dCBhIHNldHRlclwiKTtcclxuICAgIGlmICh0eXBlb2Ygc3RhdGUgPT09IFwiZnVuY3Rpb25cIiA/IHJlY2VpdmVyICE9PSBzdGF0ZSB8fCAhZiA6ICFzdGF0ZS5oYXMocmVjZWl2ZXIpKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IHdyaXRlIHByaXZhdGUgbWVtYmVyIHRvIGFuIG9iamVjdCB3aG9zZSBjbGFzcyBkaWQgbm90IGRlY2xhcmUgaXRcIik7XHJcbiAgICByZXR1cm4gKGtpbmQgPT09IFwiYVwiID8gZi5jYWxsKHJlY2VpdmVyLCB2YWx1ZSkgOiBmID8gZi52YWx1ZSA9IHZhbHVlIDogc3RhdGUuc2V0KHJlY2VpdmVyLCB2YWx1ZSkpLCB2YWx1ZTtcclxufVxyXG4iLCJpbXBvcnQgeyBBcHAsIEVtYmVkQ2FjaGUsIGdldExpbmtwYXRoLCBMaW5rQ2FjaGUsIE5vdGljZSwgVEZpbGUgfSBmcm9tIFwib2JzaWRpYW5cIlxuXG5pbnRlcmZhY2UgUmVwbGFjZW1lbnQge1xuICAgIHN0YXJ0OiBudW1iZXJcbiAgICBlbmQ6IG51bWJlclxuICAgIHN0cmluZzogc3RyaW5nXG59XG5cbmV4cG9ydCBjbGFzcyBFbWJlZEZsYXR0ZW5lciB7XG4gICAgcGFnZTogbnVtYmVyID0gMVxuICAgIGhlYWRpbmdzOiB7IFtrZXk6IHN0cmluZ106IG51bWJlciB9ID0ge31cblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICByZWFkb25seSBhcHA6IEFwcCwgXG4gICAgICAgIHJlYWRvbmx5IGluY3JlYXNlTGV2ZWxPZkVtYmVkZGVkSGVhZGluZ3M6IEJvb2xlYW4sXG4gICAgICAgIHJlYWRvbmx5IHJlbW92ZVlBTUw6IGJvb2xlYW4sXG4gICAgICAgIHJlYWRvbmx5IGNvbnZlcnRXaWtpTGlua3M6IEJvb2xlYW4sXG4gICAgICAgIHJlYWRvbmx5IGNvbnZlcnRSZWZlcmVuY2VzRm9yQmFzZVVSTDogQm9vbGVhbixcbiAgICAgICAgcmVhZG9ubHkgYmFzZVVSTDogc3RyaW5nLFxuICAgICAgICByZWFkb25seSBwYWdlU2VwYXJhdG9yOiBzdHJpbmcsXG4gICAgICAgIHJlYWRvbmx5IGhlYWRpbmdMZXZlbDogbnVtYmVyXG4gICAgKSB7fVxuXG4gICAgYXN5bmMgZmxhdHRlbihmaWxlOiBURmlsZSwgZGVwdGg6IG51bWJlciA9IDApOiBQcm9taXNlPHN0cmluZz4ge1xuICAgICAgICB2YXIgZmlsZUNvbnRlbnRzID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChmaWxlKVxuICAgICAgICBjb25zdCBtZXRhZGF0YSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpXG5cbiAgICAgICAgdmFyIHJlcGxhY2VtZW50czogUmVwbGFjZW1lbnRbXSA9IFtdXG5cbiAgICAgICAgaWYgKG1ldGFkYXRhLmhlYWRpbmdzICYmIHRoaXMuY29udmVydFJlZmVyZW5jZXNGb3JCYXNlVVJMKSB7XG4gICAgICAgICAgICBtZXRhZGF0YS5oZWFkaW5ncy5mb3JFYWNoKChoZWFkaW5nKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGhlYWRpbmcubGV2ZWwgKyAodGhpcy5pbmNyZWFzZUxldmVsT2ZFbWJlZGRlZEhlYWRpbmdzID8gZGVwdGggOiAwKSA9PSB0aGlzLmhlYWRpbmdMZXZlbCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbG9jYXRpb24gPSBoZWFkaW5nLnBvc2l0aW9uLnN0YXJ0Lm9mZnNldFxuICAgICAgICAgICAgICAgICAgICB2YXIgdXNlTG9jYXRpb24gPSBmYWxzZVxuICAgICAgICAgICAgICAgICAgICB2YXIgaW5CbG9jayA9IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChsb2NhdGlvbiA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uIC09IDFcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbkJsb2NrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpbGVDb250ZW50c1tsb2NhdGlvbl0gPT0gJ1snKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZUxvY2F0aW9uID0gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZmlsZUNvbnRlbnRzW2xvY2F0aW9uXSA9PSAnXScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKC9cXHMvLnRlc3QoZmlsZUNvbnRlbnRzW2xvY2F0aW9uXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZVxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChmaWxlQ29udGVudHNbbG9jYXRpb25dID09ICddJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluQmxvY2sgPSB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZXBsYWNlbWVudHMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFydDogdXNlTG9jYXRpb24gPyBsb2NhdGlvbiA6IGhlYWRpbmcucG9zaXRpb24uc3RhcnQub2Zmc2V0LFxuICAgICAgICAgICAgICAgICAgICAgICAgZW5kOiB1c2VMb2NhdGlvbiA/IGxvY2F0aW9uIDogaGVhZGluZy5wb3NpdGlvbi5zdGFydC5vZmZzZXQsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHJpbmc6IGBcXG4ke3RoaXMucGFnZVNlcGFyYXRvcn1cXG5gXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChtZXRhZGF0YS5oZWFkaW5ncyAmJiB0aGlzLmluY3JlYXNlTGV2ZWxPZkVtYmVkZGVkSGVhZGluZ3MgJiYgZGVwdGggPiAwKSB7XG4gICAgICAgICAgICBtZXRhZGF0YS5oZWFkaW5ncy5mb3JFYWNoKChoZWFkaW5nKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGhlYWRpbmcubGV2ZWwgPCA2KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGhhc2hJbmRleCA9IGZpbGVDb250ZW50cy5pbmRleE9mKFwiI1wiLCBoZWFkaW5nLnBvc2l0aW9uLnN0YXJ0Lm9mZnNldClcbiAgICAgICAgICAgICAgICAgICAgcmVwbGFjZW1lbnRzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnQ6IGhhc2hJbmRleCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZDogaGFzaEluZGV4LFxuICAgICAgICAgICAgICAgICAgICAgICAgc3RyaW5nOiBcIiNcIi5yZXBlYXQoTWF0aC5tYXgoTWF0aC5taW4oaGVhZGluZy5sZXZlbCArIGRlcHRoLCA2KSAtIGhlYWRpbmcubGV2ZWwsIDApKVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5yZW1vdmVZQU1MICYmIG1ldGFkYXRhLmZyb250bWF0dGVyKSB7XG4gICAgICAgICAgICByZXBsYWNlbWVudHMucHVzaCh7XG4gICAgICAgICAgICAgICAgc3RhcnQ6IG1ldGFkYXRhLmZyb250bWF0dGVyLnBvc2l0aW9uLnN0YXJ0Lm9mZnNldCxcbiAgICAgICAgICAgICAgICBlbmQ6IG1ldGFkYXRhLmZyb250bWF0dGVyLnBvc2l0aW9uLmVuZC5vZmZzZXQsXG4gICAgICAgICAgICAgICAgc3RyaW5nOiAnJ1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChtZXRhZGF0YS5lbWJlZHMpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgZW1iZWQgb2YgbWV0YWRhdGEuZW1iZWRzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbGlua3BhdGggPSBnZXRMaW5rcGF0aChlbWJlZC5saW5rKVxuICAgICAgICAgICAgICAgIGNvbnN0IGxpbmtlZEZpbGUgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpcnN0TGlua3BhdGhEZXN0KFxuICAgICAgICAgICAgICAgICAgICBsaW5rcGF0aCwgXG4gICAgICAgICAgICAgICAgICAgIGZpbGUucGF0aFxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICBpZiAobGlua2VkRmlsZSAmJiBsaW5rZWRGaWxlLmV4dGVuc2lvbi50b0xvd2VyQ2FzZSgpID09IFwibWRcIikgeyBcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmxhdHRlbmVkTGlua2VkRmlsZUNvbnRlbnRzID0gYXdhaXQgdGhpcy5mbGF0dGVuKGxpbmtlZEZpbGUsIE1hdGgubWluKGRlcHRoICsgMSwgNikpXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICByZXBsYWNlbWVudHMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFydDogZW1iZWQucG9zaXRpb24uc3RhcnQub2Zmc2V0LFxuICAgICAgICAgICAgICAgICAgICAgICAgZW5kOiBlbWJlZC5wb3NpdGlvbi5lbmQub2Zmc2V0LFxuICAgICAgICAgICAgICAgICAgICAgICAgc3RyaW5nOiBmbGF0dGVuZWRMaW5rZWRGaWxlQ29udGVudHMgKyAnXFxuJ1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJlcGxhY2VtZW50cy5zb3J0KChhLCBiKSA9PiBhLnN0YXJ0IC0gYi5zdGFydClcbiAgICAgICAgcmVwbGFjZW1lbnRzLnJldmVyc2UoKS5mb3JFYWNoKChyZXBsYWNlbWVudCkgPT4ge1xuICAgICAgICAgICAgZmlsZUNvbnRlbnRzID0gZmlsZUNvbnRlbnRzLnN1YnN0cmluZygwLCByZXBsYWNlbWVudC5zdGFydCkgKyByZXBsYWNlbWVudC5zdHJpbmcgKyBmaWxlQ29udGVudHMuc3Vic3RyaW5nKHJlcGxhY2VtZW50LmVuZClcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIGZpbGVDb250ZW50cy50cmltKClcbiAgICB9XG5cbiAgICByZXBsYWNlTGlua3MoZmlsZUNvbnRlbnRzOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICBjb25zdCBsaW5rUmVnZXggPSAvXFxbXFxbKD86KFteI1xcblxcXV0rKSMpPyhbXlxcXVxcbnxdKykoPzpcXHwoW15cXF1cXG5dKykpP1xcXVxcXS9nXG4gICAgICAgIHZhciBuZXdGaWxlQ29udGVudHMgPSBmaWxlQ29udGVudHNcbiAgICAgICAgdmFyIHJlcGxhY2VtZW50czogUmVwbGFjZW1lbnRbXSA9IFtdXG5cbiAgICAgICAgdmFyIG1hdGNoOiBSZWdFeHBFeGVjQXJyYXkgfCBudWxsXG4gICAgICAgIHdoaWxlICgobWF0Y2ggPSBsaW5rUmVnZXguZXhlYyhmaWxlQ29udGVudHMpKSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgbGV0IGxpbmsgPSBtYXRjaFsyXVxuICAgICAgICAgICAgaWYgKHRoaXMuY29udmVydFJlZmVyZW5jZXNGb3JCYXNlVVJMKSB7XG4gICAgICAgICAgICAgICAgbGV0IHNwbGl0ID0gZmlsZUNvbnRlbnRzLnNwbGl0KCcjICcgKyBsaW5rKVxuICAgICAgICAgICAgICAgIGlmIChzcGxpdC5sZW5ndGggPCAyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdMaW5rZWQgc2VjdGlvbiBcIicgKyBsaW5rICsgJ1wiIG5vdCBmb3VuZCEnKVxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc3BsaXQubGVuZ3RoID4gMikge1xuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdMaW5rZWQgc2VjdGlvbiBcIicgKyBsaW5rICsgJ1wiIGZvdW5kIG1vcmUgdGhhbiBvbmNlIScpXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdMaW5rZWQgc2VjdGlvbiBcIicgKyBsaW5rICsgJ1wiIGZvdW5kIG1vcmUgdGhhbiBvbmNlIScpXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHBhZ2UgPSAoc3BsaXRbMF0uc3Vic3RyaW5nKDAsIHNwbGl0WzBdLmxlbmd0aCAtIDEpLm1hdGNoKG5ldyBSZWdFeHAodGhpcy5wYWdlU2VwYXJhdG9yLCAnZycpKSB8fCBbXSkubGVuZ3RoICsgMVxuICAgICAgICAgICAgICAgICAgICBsZXQgdGl0bGUgPSBtYXRjaFszXSA/PyAobWF0Y2hbMV0gPyBgJHttYXRjaFsxXX0g4oe+ICR7bGlua31gIDogbGluaylcbiAgICAgICAgICAgICAgICAgICAgcmVwbGFjZW1lbnRzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnQ6IG1hdGNoLmluZGV4LFxuICAgICAgICAgICAgICAgICAgICAgICAgZW5kOiBtYXRjaC5pbmRleCArIG1hdGNoWzBdLmxlbmd0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0cmluZzogYFske3RpdGxlfV0oJHt0aGlzLmJhc2VVUkx9LyR7cGFnZX0vIyR7bGluay50b0xvd2VyQ2FzZSgpLnNwbGl0KCcgJykuam9pbignLScpLnJlcGxhY2UoJywnLCAnJykucmVwbGFjZSgnXFwnJywgJycpfSlgXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmNvbnZlcnRXaWtpTGlua3MpIHtcbiAgICAgICAgICAgICAgICByZXBsYWNlbWVudHMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0OiBtYXRjaC5pbmRleCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZDogbWF0Y2guaW5kZXggKyBtYXRjaFswXS5sZW5ndGgsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHJpbmc6IGBbJHtsaW5rfV0oJHtlbmNvZGVVUkkoYG9ic2lkaWFuOi8vb3Blbj92YXVsdD0ke3RoaXMuYXBwLnZhdWx0LmdldE5hbWUoKX0mZmlsZT0ke2xpbmt9Lm1kYCl9KWBcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmVwbGFjZW1lbnRzLnNvcnQoKGEsIGIpID0+IGEuc3RhcnQgLSBiLnN0YXJ0KVxuICAgICAgICByZXBsYWNlbWVudHMucmV2ZXJzZSgpLmZvckVhY2goKHJlcGxhY2VtZW50KSA9PiB7XG4gICAgICAgICAgICBuZXdGaWxlQ29udGVudHMgPSBuZXdGaWxlQ29udGVudHMuc3Vic3RyaW5nKDAsIHJlcGxhY2VtZW50LnN0YXJ0KSArIHJlcGxhY2VtZW50LnN0cmluZyArIG5ld0ZpbGVDb250ZW50cy5zdWJzdHJpbmcocmVwbGFjZW1lbnQuZW5kKVxuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gbmV3RmlsZUNvbnRlbnRzLnRyaW0oKVxuICAgIH1cbn0iLCJpbXBvcnQgeyBNb2RhbCwgTm90aWNlLCBTZXR0aW5nIH0gZnJvbSBcIm9ic2lkaWFuXCJcbmltcG9ydCB7IEVtYmVkRmxhdHRlbmVyIH0gZnJvbSBcIi4vRW1iZWRGbGF0dGVuZXJcIlxuaW1wb3J0IEV4cG9ydFBsdWdpbiBmcm9tIFwiLi9tYWluXCJcblxuZXhwb3J0IGNsYXNzIFNldHRpbmdzTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG5cdHNhdmVMb2NhdGlvbjogc3RyaW5nID0gXCJPYnNpZGlhblwiXG5cdGluY3JlYXNlTGV2ZWxPZkVtYmVkZGVkSGVhZGluZ3M6IGJvb2xlYW4gPSB0cnVlXG5cdHJlbW92ZVlBTUw6IGJvb2xlYW4gPSB0cnVlXG5cdGNvbnZlcnRSZWZlcmVuY2VzRm9yQmFzZVVSTDogYm9vbGVhbiA9IGZhbHNlXG5cblx0Y29uc3RydWN0b3IocmVhZG9ubHkgcGx1Z2luOiBFeHBvcnRQbHVnaW4pIHsgc3VwZXIocGx1Z2luLmFwcCkgfVxuXG5cdG9uT3BlbigpIHtcblx0XHRsZXQge2NvbnRlbnRFbH0gPSB0aGlzXG5cdFx0Y29uc3Qgc2F2ZUxvY2F0aW9uID0gbmV3IFNldHRpbmcoY29udGVudEVsKVxuXHRcdHNhdmVMb2NhdGlvbi5zZXROYW1lKFwiU2F2ZSBsb2NhdGlvblwiKVxuXHRcdHNhdmVMb2NhdGlvbi5hZGREcm9wZG93bigoZHJvcGRvd24pID0+IHtcblx0XHRcdGRyb3Bkb3duLmFkZE9wdGlvbihcIk9ic2lkaWFuXCIsIFwiT2JzaWRpYW5cIilcblx0XHRcdGRyb3Bkb3duLmFkZE9wdGlvbihcIkNsaXBib2FyZFwiLCBcIkNsaXBib2FyZFwiKVxuXHRcdFx0ZHJvcGRvd24uc2V0VmFsdWUodGhpcy5zYXZlTG9jYXRpb24pXG5cdFx0XHRkcm9wZG93bi5vbkNoYW5nZSgodmFsdWUpID0+IHsgdGhpcy5zYXZlTG9jYXRpb24gPSB2YWx1ZSB9KVxuXHRcdH0pXG5cdFx0XG5cdFx0Y29uc3QgaW5jcmVhc2VIZWFkZXJzID0gbmV3IFNldHRpbmcoY29udGVudEVsKVxuXHRcdGluY3JlYXNlSGVhZGVycy5zZXROYW1lKFwiSW5jcmVhc2UgaGVhZGluZ3Mgb2YgcmVmZXJlbmNlZCBub3Rlc1wiKVxuXHRcdGluY3JlYXNlSGVhZGVycy5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4geyBcblx0XHRcdHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLmluY3JlYXNlTGV2ZWxPZkVtYmVkZGVkSGVhZGluZ3MpXG5cdFx0XHR0b2dnbGUub25DaGFuZ2UoKHZhbHVlKSA9PiB7IHRoaXMuaW5jcmVhc2VMZXZlbE9mRW1iZWRkZWRIZWFkaW5ncyA9IHZhbHVlIH0pXG5cdFx0fSlcblxuXHRcdGNvbnN0IHJlbW92ZVlBTUwgPSBuZXcgU2V0dGluZyhjb250ZW50RWwpXG5cdFx0cmVtb3ZlWUFNTC5zZXROYW1lKFwiUmVtb3ZlIFlBTUxcIilcblx0XHRyZW1vdmVZQU1MLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7IFxuXHRcdFx0dG9nZ2xlLnNldFZhbHVlKHRoaXMucmVtb3ZlWUFNTClcblx0XHRcdHRvZ2dsZS5vbkNoYW5nZSgodmFsdWUpID0+IHsgdGhpcy5yZW1vdmVZQU1MID0gdmFsdWUgfSlcblx0XHR9KVxuXG5cdFx0Y29uc3QgYmFzZVVSTEV4cG9ydCA9IG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcblx0XHRiYXNlVVJMRXhwb3J0LnNldE5hbWUoXCJDb252ZXJ0IHJlZmVyZW5jZXMgdXNpbmcgYmFzZVVSTFwiKVxuXHRcdGJhc2VVUkxFeHBvcnQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHsgXG5cdFx0XHR0b2dnbGUuc2V0VmFsdWUodGhpcy5jb252ZXJ0UmVmZXJlbmNlc0ZvckJhc2VVUkwpXG5cdFx0XHR0b2dnbGUub25DaGFuZ2UoKHZhbHVlKSA9PiB7IHRoaXMuY29udmVydFJlZmVyZW5jZXNGb3JCYXNlVVJMID0gdmFsdWUgfSlcblx0XHR9KVxuXHRcdFxuXHRcdGNvbnN0IHNhdmVCdXR0b24gPSBuZXcgU2V0dGluZyhjb250ZW50RWwpXG5cdFx0c2F2ZUJ1dHRvbi5hZGRCdXR0b24oKGJ1dHRvbikgPT4ge1xuXHRcdFx0YnV0dG9uLnNldEJ1dHRvblRleHQoXCJTYXZlXCIpXG5cdFx0XHRidXR0b24uc2V0Q3RhKClcblx0XHRcdGJ1dHRvbi5vbkNsaWNrKGFzeW5jIChldmVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGFjdGl2ZUZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpXG5cdFx0XHRcdGNvbnN0IG1ldGFkYXRhID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoYWN0aXZlRmlsZSlcblxuXHRcdFx0XHRpZiAodGhpcy5jb252ZXJ0UmVmZXJlbmNlc0ZvckJhc2VVUkwgJiYgKCFtZXRhZGF0YS5mcm9udG1hdHRlciB8fCAhbWV0YWRhdGEuZnJvbnRtYXR0ZXJbJ2Jhc2VVUkwnXSkpIHtcblx0XHRcdFx0XHRuZXcgTm90aWNlKCdObyBCYXNlIFVSTCBGb3VuZCcpXG5cdFx0XHRcdFx0dGhpcy5jbG9zZSgpXG5cdFx0XHRcdFx0cmV0dXJuXG5cdFx0XHRcdH1cblx0XHRcdFx0Y29uc3QgZW1iZWRGbGF0dGVuZXIgPSBuZXcgRW1iZWRGbGF0dGVuZXIoXG5cdFx0XHRcdFx0dGhpcy5hcHAsIFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmluY3JlYXNlTGV2ZWxPZkVtYmVkZGVkSGVhZGluZ3MsIFxuXHRcdFx0XHRcdHRoaXMucmVtb3ZlWUFNTCxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zYXZlTG9jYXRpb24gIT0gXCJPYnNpZGlhblwiICYmICF0aGlzLmNvbnZlcnRSZWZlcmVuY2VzRm9yQmFzZVVSTCxcblx0XHRcdFx0XHR0aGlzLmNvbnZlcnRSZWZlcmVuY2VzRm9yQmFzZVVSTCxcblx0XHRcdFx0XHRtZXRhZGF0YS5mcm9udG1hdHRlcj8uWydiYXNlVVJMJ10sXG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MucGFnZVNlcGFyYXRvcixcblx0XHRcdFx0XHRwYXJzZUludCh0aGlzLnBsdWdpbi5zZXR0aW5ncy5oZWFkaW5nTGV2ZWxbMV0pXG5cdFx0XHRcdClcblx0XHRcdFx0Y29uc3QgZmxhdHRlbmVkID0gYXdhaXQgZW1iZWRGbGF0dGVuZXIuZmxhdHRlbihhY3RpdmVGaWxlKVxuXHRcdFx0XHRjb25zdCBmbGF0dGVuZWRMaW5rZWQgPSBlbWJlZEZsYXR0ZW5lci5yZXBsYWNlTGlua3MoZmxhdHRlbmVkKVxuXHRcdFx0XHRzd2l0Y2ggKHRoaXMuc2F2ZUxvY2F0aW9uKSB7XG5cdFx0XHRcdFx0Y2FzZSBcIk9ic2lkaWFuXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdGaWxlUGFyZW50ID0gdGhpcy5hcHAuZmlsZU1hbmFnZXIuZ2V0TmV3RmlsZVBhcmVudChhY3RpdmVGaWxlLnBhdGgpXG4gICAgICAgICAgICAgICAgICAgICAgICBcblx0XHRcdFx0XHRcdHZhciBmaXJzdEhlYWRpbmc7XG5cdFx0XHRcdFx0XHR2YXIgaGVhZGluZ3MgPSBtZXRhZGF0YS5oZWFkaW5nc1xuXHRcdFx0XHRcdFx0aWYgKGhlYWRpbmdzKSB7XG5cdFx0XHRcdFx0XHRcdGZpcnN0SGVhZGluZyA9IGhlYWRpbmdzLmZpbmQoKGhlYWRpbmcpID0+IGhlYWRpbmcubGV2ZWwgPT0gMSlcblx0XHRcdFx0XHRcdH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZpbGVOYW1lID0gXCJVbnRpdGxlZC5tZFwiXG5cdFx0XHRcdFx0XHR2YXIgbnVtID0gMVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpcnN0SGVhZGluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVOYW1lID0gYCR7Zmlyc3RIZWFkaW5nLmhlYWRpbmd9Lm1kYFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhuZXdGaWxlUGFyZW50LnBhdGggKyBmaWxlTmFtZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZU5hbWUgPSBgJHtmaXJzdEhlYWRpbmcuaGVhZGluZ30gJHtudW19Lm1kYFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudW0rK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKG5ld0ZpbGVQYXJlbnQucGF0aCArIGZpbGVOYW1lKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlTmFtZSA9IGBVbnRpdGxlZCAke251bX0ubWRgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bSsrXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKG5ld0ZpbGVQYXJlbnQucGF0aCArIGZpbGVOYW1lLCBmbGF0dGVuZWRMaW5rZWQpXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC53b3Jrc3BhY2Uub3BlbkxpbmtUZXh0KG5ld0ZpbGVQYXJlbnQucGF0aCArIGZpbGVOYW1lLCBcIlwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShgRXhwb3J0ZWQgdG8gJHtmaWxlTmFtZX0hYClcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrXG5cdFx0XHRcdFx0Y2FzZSBcIkNsaXBib2FyZFwiOlxuXHRcdFx0XHRcdFx0bmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQoZmxhdHRlbmVkTGlua2VkKVxuXHRcdFx0XHRcdFx0bmV3IE5vdGljZShcIkV4cG9ydGVkIHRvIENsaXBib2FyZCFcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrXG5cdFx0XHRcdH1cblx0XHRcdFx0dGhpcy5jbG9zZSgpXG5cdFx0XHR9KVxuXHRcdH0pXG5cdH1cblxuXHRvbkNsb3NlKCkge1xuXHRcdGxldCB7IGNvbnRlbnRFbCB9ID0gdGhpc1xuXHRcdGNvbnRlbnRFbC5lbXB0eSgpXG5cdH1cbn0iLCJpbXBvcnQgeyBBcHAsIGFkZEljb24sIE5vdGljZSwgUGx1Z2luLCBQbHVnaW5TZXR0aW5nVGFiLCBTZXR0aW5nIH0gZnJvbSAnb2JzaWRpYW4nXHJcbmltcG9ydCB7IEVtYmVkRmxhdHRlbmVyIH0gZnJvbSAnLi9FbWJlZEZsYXR0ZW5lcidcclxuaW1wb3J0IHsgU2V0dGluZ3NNb2RhbCB9IGZyb20gXCIuL1NldHRpbmdzTW9kYWxcIlxyXG5cclxuaW50ZXJmYWNlIEV4cG9ydFBsdWdpblNldHRpbmdzIHtcclxuXHRwYWdlU2VwYXJhdG9yOiBzdHJpbmdcclxuICBoZWFkaW5nTGV2ZWw6IHN0cmluZ1xyXG59XHJcblxyXG5jb25zdCBERUZBVUxUX1NFVFRJTkdTOiBFeHBvcnRQbHVnaW5TZXR0aW5ncyA9IHtcclxuXHRwYWdlU2VwYXJhdG9yOiAnPCEtLW5leHRwYWdlLS0+JyxcclxuICBoZWFkaW5nTGV2ZWw6ICdIMidcclxufVxyXG5cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEV4cG9ydFBsdWdpbiBleHRlbmRzIFBsdWdpbiB7XHJcbiAgc2V0dGluZ3M6IEV4cG9ydFBsdWdpblNldHRpbmdzXHJcblxyXG5cdGFzeW5jIG9ubG9hZCgpIHtcclxuICAgIGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKClcclxuXHJcbiAgICBhZGRJY29uKCdzaGFyZS1leHBvcnQnLCAnPHBhdGggZD1cIk0zOC4xNjA5NjQ2LDI3LjM4NjkwNSBDNDAuMTEwNzI2MywyNy4zODY5MDUgNDEuNjkxMzIwNCwyOC45Njc0OTkxIDQxLjY5MTMyMDQsMzAuOTE3MjYwOCBDNDEuNjkxMzIwNCwzMi43OTczODgxIDQwLjIyMTYwOTgsMzQuMzM0MjQ2MiAzOC4zNjgzOTk4LDM0LjQ0MTYyMzYgTDM4LjE2MDk2NDYsMzQuNDQ3NjE2NiBMMjguMTY4Mjg1NywzNC40NDc2MTY2IEMyMy44NTI2NTA0LDM0LjQ0NzYxNjYgMjAuNDk5OTc0NCwzNy4zMDQwMDI2IDIwLjM0OTgwOTEsNDAuNjQ4MDc2NiBMMjAuMzQ0NTU2Nyw0MC44ODIxNDU2IEwyMC4zNDQ1NTY3LDc5LjIwMzI0NzIgQzIwLjM0NDU1NjcsODIuNTY4NzIzMiAyMy41OTkxNTAyLDg1LjUwMTU5NzMgMjcuODY4Nzg1NCw4NS42MzMxNzE0IEwyOC4xNjgyODU3LDg1LjYzNzc3NjEgTDcxLjgzMTcxNDMsODUuNjM3Nzc2MSBDNzYuMTQ3MzQ5Niw4NS42Mzc3NzYxIDc5LjUwMDAyNTYsODIuNzgxMzkwMSA3OS42NTAxOTA5LDc5LjQzNzMxNjEgTDc5LjY1NTQ0MzMsNzkuMjAzMjQ3MiBMNzkuNjU1NDQzMyw0MC44ODIxNDU2IEM3OS42NTU0NDMzLDM3LjUyMzAzMTggNzYuNDEyNjY3NywzNC41OTM2OTc1IDcyLjE2MDE1NjcsMzQuNDUyODg2NiBMNzEuODYxODU5NywzNC40NDc2MTY2IEw2MS44MzkwMzU0LDM0LjQ0NzYxNjYgQzU5Ljg4OTI3MzcsMzQuNDQ3NjE2NiA1OC4zMDg2Nzk2LDMyLjg2NzAyMjUgNTguMzA4Njc5NiwzMC45MTcyNjA4IEM1OC4zMDg2Nzk2LDI5LjAzNzEzMzQgNTkuNzc4MzkwMiwyNy41MDAyNzU0IDYxLjYzMTYwMDIsMjcuMzkyODk4IEw2MS44MzkwMzU0LDI3LjM4NjkwNSBMNzEuODY5OTMxNCwyNy4zODY5MDUgQzc5Ljg1Njc5NjIsMjcuNDA1MTc1MiA4Ni41MTE3MDM4LDMzLjE1Mzk2NTcgODYuNzExNTM0MSw0MC41NDAwOTk0IEw4Ni43MTYxNTQ5LDQwLjg4MjE0NTYgTDg2LjcxNjE1NDksNzkuMjAzMjQ3MiBDODYuNzE2MTU0OSw4Ni42NTE4MTg2IDgwLjE2MDM1OTcsOTIuNTE4MzUzNSA3Mi4yMDAwODk5LDkyLjY5NDQxNzMgTDcxLjgzMTcxNDMsOTIuNjk4NDg3OCBMMjguMTY4Mjg1Nyw5Mi42OTg0ODc4IEMyMC4xNjYwMjA1LDkyLjY5ODQ4NzggMTMuNDg4OTc4OCw4Ni45NDQ4MTAxIDEzLjI4ODQ4MTMsNzkuNTQ1ODg5MSBMMTMuMjgzODQ1MSw3OS4yMDMyNDcyIEwxMy4yODM4NDUxLDQwLjg4MjE0NTYgQzEzLjI4Mzg0NTEsMzMuNDMzNTc0MSAxOS44Mzk2NDAzLDI3LjU2NzAzOTMgMjcuNzk5OTEwMSwyNy4zOTA5NzU0IEwyOC4xNjgyODU3LDI3LjM4NjkwNSBMMzguMTYwOTY0NiwyNy4zODY5MDUgWlwiIGlkPVwiUGF0aFwiIGZpbGw9XCJjdXJyZW50Q29sb3JcIiBmaWxsLXJ1bGU9XCJub256ZXJvXCI+PC9wYXRoPjxsaW5lIHgxPVwiNTAuMTExNDUzNlwiIHkxPVwiNTNcIiB4Mj1cIjUwLjExMTQ1MzZcIiB5Mj1cIjEwLjQwODExODFcIiBpZD1cIkxpbmVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2Utd2lkdGg9XCI2XCIgc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiPjwvbGluZT48bGluZSB4MT1cIjQwLjM5OTUzNjdcIiB5MT1cIjIwLjEyMDAzNVwiIHgyPVwiNTAuMTExNDUzNlwiIHkyPVwiMTAuNDA4MTE4MVwiIGlkPVwiTGluZVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS13aWR0aD1cIjZcIiBzdHJva2UtbGluZWNhcD1cInJvdW5kXCI+PC9saW5lPjxsaW5lIHgxPVwiNTAuMjIyOTA3M1wiIHkxPVwiMjAuMTIwMDM1XCIgeDI9XCI1OS45MzQ4MjQyXCIgeTI9XCIxMC40MDgxMTgxXCIgaWQ9XCJMaW5lXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLXdpZHRoPVwiNlwiIHN0cm9rZS1saW5lY2FwPVwicm91bmRcIiB0cmFuc2Zvcm09XCJ0cmFuc2xhdGUoNTQuOTY3NDEyLCAxNS4zNzU1MzApIHNjYWxlKC0xLCAxKSB0cmFuc2xhdGUoLTU0Ljk2NzQxMiwgLTE1LjM3NTUzMCkgXCI+PC9saW5lPicpXHJcblxyXG4gICAgYWRkSWNvbignc2hhcmUtbWFjc3RvcmllcycsICc8cGF0aCBkPVwiTTM4LjE2MDk2NDYsMjcuMzg2OTA1IEM0MC4xMTA3MjYzLDI3LjM4NjkwNSA0MS42OTEzMjA0LDI4Ljk2NzQ5OTEgNDEuNjkxMzIwNCwzMC45MTcyNjA4IEM0MS42OTEzMjA0LDMyLjc5NzM4ODEgNDAuMjIxNjA5OCwzNC4zMzQyNDYyIDM4LjM2ODM5OTgsMzQuNDQxNjIzNiBMMzguMTYwOTY0NiwzNC40NDc2MTY2IEwyOC4xNjgyODU3LDM0LjQ0NzYxNjYgQzIzLjg1MjY1MDQsMzQuNDQ3NjE2NiAyMC40OTk5NzQ0LDM3LjMwNDAwMjYgMjAuMzQ5ODA5MSw0MC42NDgwNzY2IEwyMC4zNDQ1NTY3LDQwLjg4MjE0NTYgTDIwLjM0NDU1NjcsNzkuMjAzMjQ3MiBDMjAuMzQ0NTU2Nyw4Mi41Njg3MjMyIDIzLjU5OTE1MDIsODUuNTAxNTk3MyAyNy44Njg3ODU0LDg1LjYzMzE3MTQgTDI4LjE2ODI4NTcsODUuNjM3Nzc2MSBMNzEuODMxNzE0Myw4NS42Mzc3NzYxIEM3Ni4xNDczNDk2LDg1LjYzNzc3NjEgNzkuNTAwMDI1Niw4Mi43ODEzOTAxIDc5LjY1MDE5MDksNzkuNDM3MzE2MSBMNzkuNjU1NDQzMyw3OS4yMDMyNDcyIEw3OS42NTU0NDMzLDQwLjg4MjE0NTYgQzc5LjY1NTQ0MzMsMzcuNTIzMDMxOCA3Ni40MTI2Njc3LDM0LjU5MzY5NzUgNzIuMTYwMTU2NywzNC40NTI4ODY2IEw3MS44NjE4NTk3LDM0LjQ0NzYxNjYgTDYxLjgzOTAzNTQsMzQuNDQ3NjE2NiBDNTkuODg5MjczNywzNC40NDc2MTY2IDU4LjMwODY3OTYsMzIuODY3MDIyNSA1OC4zMDg2Nzk2LDMwLjkxNzI2MDggQzU4LjMwODY3OTYsMjkuMDM3MTMzNCA1OS43NzgzOTAyLDI3LjUwMDI3NTQgNjEuNjMxNjAwMiwyNy4zOTI4OTggTDYxLjgzOTAzNTQsMjcuMzg2OTA1IEw3MS44Njk5MzE0LDI3LjM4NjkwNSBDNzkuODU2Nzk2MiwyNy40MDUxNzUyIDg2LjUxMTcwMzgsMzMuMTUzOTY1NyA4Ni43MTE1MzQxLDQwLjU0MDA5OTQgTDg2LjcxNjE1NDksNDAuODgyMTQ1NiBMODYuNzE2MTU0OSw3OS4yMDMyNDcyIEM4Ni43MTYxNTQ5LDg2LjY1MTgxODYgODAuMTYwMzU5Nyw5Mi41MTgzNTM1IDcyLjIwMDA4OTksOTIuNjk0NDE3MyBMNzEuODMxNzE0Myw5Mi42OTg0ODc4IEwyOC4xNjgyODU3LDkyLjY5ODQ4NzggQzIwLjE2NjAyMDUsOTIuNjk4NDg3OCAxMy40ODg5Nzg4LDg2Ljk0NDgxMDEgMTMuMjg4NDgxMyw3OS41NDU4ODkxIEwxMy4yODM4NDUxLDc5LjIwMzI0NzIgTDEzLjI4Mzg0NTEsNDAuODgyMTQ1NiBDMTMuMjgzODQ1MSwzMy40MzM1NzQxIDE5LjgzOTY0MDMsMjcuNTY3MDM5MyAyNy43OTk5MTAxLDI3LjM5MDk3NTQgTDI4LjE2ODI4NTcsMjcuMzg2OTA1IEwzOC4xNjA5NjQ2LDI3LjM4NjkwNSBaXCIgaWQ9XCJQYXRoXCIgZmlsbD1cImN1cnJlbnRDb2xvclwiIGZpbGwtcnVsZT1cIm5vbnplcm9cIj48L3BhdGg+PGxpbmUgeDE9XCI1MC4xMTE0NTM2XCIgeTE9XCIzMi40ODkzODE1XCIgeDI9XCI1MC4xMTE0NTM2XCIgeTI9XCIxMC40MDgxMTgxXCIgaWQ9XCJMaW5lXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLXdpZHRoPVwiNlwiIHN0cm9rZS1saW5lY2FwPVwicm91bmRcIj48L2xpbmU+PHBhdGggZD1cIk02Mi4yMzg1NjY5LDM4Ljg2MDU2MTQgTDM3Ljc2MTQzMzEsMzguODYwNTYxNCBDMzYuNDYxNTkyLDM4Ljg2MDU2MTQgMzUuNDA3ODYyNiwzOS45MTQyOTA4IDM1LjQwNzg2MjYsNDEuMjE0MTMxOSBMMzUuNDA3ODYyNiw3OC44NzEyNjA4IEwzNS40MTQyMTc0LDc5LjA1MDYxMTUgQzM1LjU0ODg1MjMsODAuOTM1OTk1IDM3Ljc5MjgxODcsODEuOTIxMzc0IDM5LjI3NzE4NDYsODAuNjcxNzU4NCBMNDkuOTk4ODIzMiw3MS42NDQ1NTc5IEw2MC43MjI4MTU0LDgwLjY3MTc1ODQgQzYyLjI1MzU2NzgsODEuOTYwNDI0NCA2NC41OTIxMzc0LDgwLjg3MjIyNjIgNjQuNTkyMTM3NCw3OC44NzEyNjA4IEw2NC41OTIxMzc0LDQxLjIxNDEzMTkgQzY0LjU5MjEzNzQsMzkuOTE0MjkwOCA2My41Mzg0MDgsMzguODYwNTYxNCA2Mi4yMzg1NjY5LDM4Ljg2MDU2MTQgWiBNNTkuODg0OTk2Myw0My41Njc2MzggTDU5Ljg4NDk5NjMsNzMuODEzMzczMiBMNTEuNTE1NzUxNSw2Ni43Njc3MDg2IEw1MS4zNTcxNDQzLDY2LjY0NTIyODggQzUwLjQ5MDY0NjcsNjYuMDMyODI5NyA0OS4zMDg2ODQxLDY2LjA3MzY1NjMgNDguNDg0MjQ4NSw2Ni43Njc3MDg2IEw0MC4xMTUwMDM3LDczLjgxMjE5NjQgTDQwLjExNTAwMzcsNDMuNTY3NjM4IEw1OS44ODQ5OTYzLDQzLjU2NzYzOCBaXCIgaWQ9XCJSZWN0YW5nbGVcIiBmaWxsPVwiY3VycmVudENvbG9yXCIgZmlsbC1ydWxlPVwibm9uemVyb1wiPjwvcGF0aD48bGluZSB4MT1cIjQwLjM5OTUzNjdcIiB5MT1cIjIwLjEyMDAzNVwiIHgyPVwiNTAuMTExNDUzNlwiIHkyPVwiMTAuNDA4MTE4MVwiIGlkPVwiTGluZVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS13aWR0aD1cIjZcIiBzdHJva2UtbGluZWNhcD1cInJvdW5kXCI+PC9saW5lPjxsaW5lIHgxPVwiNTAuMjIyOTA3M1wiIHkxPVwiMjAuMTIwMDM1XCIgeDI9XCI1OS45MzQ4MjQyXCIgeTI9XCIxMC40MDgxMTgxXCIgaWQ9XCJMaW5lXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLXdpZHRoPVwiNlwiIHN0cm9rZS1saW5lY2FwPVwicm91bmRcIiB0cmFuc2Zvcm09XCJ0cmFuc2xhdGUoNTQuOTY3NDEyLCAxNS4zNzU1MzApIHNjYWxlKC0xLCAxKSB0cmFuc2xhdGUoLTU0Ljk2NzQxMiwgLTE1LjM3NTUzMCkgXCI+PC9saW5lPicpXHJcblxyXG4gICAgdGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBFeHBvcnRQbHVnaW5TZXR0aW5nVGFiKHRoaXMuYXBwLCB0aGlzKSlcclxuXHJcblx0XHR0aGlzLmFkZENvbW1hbmQoe1xyXG5cdFx0XHRpZDogJ2V4cG9ydC1tYXJrZG93bi13aXRoLWVtYmVkcycsXHJcblx0XHRcdG5hbWU6ICdFeHBvcnQgTWFya2Rvd24gd2l0aCBFbWJlZHMnLFxyXG4gICAgICBpY29uOiAnc2hhcmUtZXhwb3J0JyxcclxuXHRcdFx0Y2FsbGJhY2s6ICgpID0+IHtcclxuXHRcdFx0XHRjb25zdCBmaWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKVxyXG5cdFx0XHRcdGlmIChmaWxlICE9PSBudWxsKSB7XHJcblx0XHRcdFx0XHRuZXcgU2V0dGluZ3NNb2RhbCh0aGlzKS5vcGVuKClcclxuXHRcdFx0XHRcdHJldHVybiB0cnVlXHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHJldHVybiBmYWxzZVxyXG5cdFx0XHR9XHJcblx0XHR9KVxyXG4gICAgaWYgKHRoaXMuYXBwLmlzTW9iaWxlKSB7XHJcbiAgICAgIHRoaXMuYWRkQ29tbWFuZCh7XHJcbiAgICAgICAgaWQ6ICdzaGFyZS1tYXJrZG93bi13aXRoLWVtYmVkcycsXHJcbiAgICAgICAgbmFtZTogJ1NoYXJlIE1hcmtkb3duIHdpdGggRW1iZWRzJyxcclxuICAgICAgICBpY29uOiAnc2hhcmUtZXhwb3J0JyxcclxuICAgICAgICBjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgY29uc3QgZmlsZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKClcclxuICAgICAgICAgIGlmIChmaWxlICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGVtYmVkRmxhdHRlbmVyID0gbmV3IEVtYmVkRmxhdHRlbmVyKFxyXG4gICAgICAgICAgICAgICAgdGhpcy5hcHAsIFxyXG4gICAgICAgICAgICAgICAgdHJ1ZSwgXHJcbiAgICAgICAgICAgICAgICB0cnVlLFxyXG4gICAgICAgICAgICAgICAgdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgJycsXHJcbiAgICAgICAgICAgICAgICAnJyxcclxuICAgICAgICAgICAgICAgIDBcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICBjb25zdCBmbGF0dGVuZWQgPSBhd2FpdCBlbWJlZEZsYXR0ZW5lci5mbGF0dGVuKGZpbGUpXHJcbiAgICAgICAgICAgIGNvbnN0IGZsYXR0ZW5lZExpbmtlZCA9IGVtYmVkRmxhdHRlbmVyLnJlcGxhY2VMaW5rcyhmbGF0dGVuZWQpXHJcblxyXG4gICAgICAgICAgICBjb25zdCBzaGFyZSA9IHtcclxuICAgICAgICAgICAgICB0ZXh0OiBmbGF0dGVuZWRMaW5rZWQsXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbmF2aWdhdG9yLnNoYXJlKHNoYXJlKVxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgICB0aGlzLmFkZENvbW1hbmQoe1xyXG4gICAgICAgIGlkOiAnc2hhcmUtbWFya2Rvd24td2l0aC1lbWJlZHMtYmFzZVVSTCcsXHJcbiAgICAgICAgbmFtZTogJ1NoYXJlIE1hcmtkb3duIHdpdGggRW1iZWRzIHdpdGggYmFzZVVSTCcsXHJcbiAgICAgICAgaWNvbjogJ3NoYXJlLW1hY3N0b3JpZXMnLFxyXG4gICAgICAgIGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICBjb25zdCBmaWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKVxyXG4gICAgICAgICAgaWYgKGZpbGUgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgY29uc3QgbWV0YWRhdGEgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKVxyXG4gICAgICAgICAgICBpZiAobWV0YWRhdGEuZnJvbnRtYXR0ZXI/LlsnYmFzZVVSTCddKSB7XHJcbiAgICAgICAgICAgICAgY29uc3QgZW1iZWRGbGF0dGVuZXIgPSBuZXcgRW1iZWRGbGF0dGVuZXIoXHJcbiAgICAgICAgICAgICAgICB0aGlzLmFwcCwgXHJcbiAgICAgICAgICAgICAgICB0cnVlLCBcclxuICAgICAgICAgICAgICAgIHRydWUsXHJcbiAgICAgICAgICAgICAgICBmYWxzZSxcclxuICAgICAgICAgICAgICAgIHRydWUsXHJcbiAgICAgICAgICAgICAgICBtZXRhZGF0YS5mcm9udG1hdHRlclsnYmFzZVVSTCddLFxyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5wYWdlU2VwYXJhdG9yLFxyXG4gICAgICAgICAgICAgICAgcGFyc2VJbnQodGhpcy5zZXR0aW5ncy5oZWFkaW5nTGV2ZWxbMV0pXHJcbiAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgIGNvbnN0IGZsYXR0ZW5lZCA9IGF3YWl0IGVtYmVkRmxhdHRlbmVyLmZsYXR0ZW4oZmlsZSlcclxuICAgICAgICAgICAgICBjb25zdCBmbGF0dGVuZWRMaW5rZWQgPSBlbWJlZEZsYXR0ZW5lci5yZXBsYWNlTGlua3MoZmxhdHRlbmVkKVxyXG4gICAgICAgICAgICAgIGNvbnN0IHNoYXJlID0ge1xyXG4gICAgICAgICAgICAgICAgdGV4dDogZmxhdHRlbmVkTGlua2VkLFxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBuYXZpZ2F0b3Iuc2hhcmUoc2hhcmUpXHJcbiAgICAgICAgICAgICAgcmV0dXJuIHRydWVcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBuZXcgTm90aWNlKCdObyBiYXNlVVJMIHNwZWNpZmllZC4nKVxyXG4gICAgICAgICAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXR1cm4gZmFsc2VcclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcbiAgICB9XHJcblx0fVxyXG5cclxuICBhc3luYyBsb2FkU2V0dGluZ3MoKSB7XHJcblx0XHR0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgYXdhaXQgdGhpcy5sb2FkRGF0YSgpKVxyXG5cdH1cclxuXHJcblx0YXN5bmMgc2F2ZVNldHRpbmdzKCkge1xyXG5cdFx0YXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKVxyXG5cdH1cclxufVxyXG5cclxuY2xhc3MgRXhwb3J0UGx1Z2luU2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xyXG5cdHBsdWdpbjogRXhwb3J0UGx1Z2luXHJcblxyXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IEV4cG9ydFBsdWdpbikge1xyXG5cdFx0c3VwZXIoYXBwLCBwbHVnaW4pXHJcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpblxyXG5cdH1cclxuXHJcblx0ZGlzcGxheSgpOiB2b2lkIHtcclxuXHRcdGxldCB7Y29udGFpbmVyRWx9ID0gdGhpc1xyXG5cclxuXHRcdGNvbnRhaW5lckVsLmVtcHR5KClcclxuXHJcblx0XHRjb250YWluZXJFbC5jcmVhdGVFbCgnaDInLCB7dGV4dDogJ1NldHRpbmdzIGZvciB0aGUgRXhwb3J0IE1hcmtkb3duIHdpdGggRW1iZWRzIHBsdWdpbi4nfSlcclxuXHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0LnNldE5hbWUoJ1BhZ2Ugc2VwYXJhdG9yJylcclxuXHRcdFx0LnNldERlc2MoJ1RoZSB0ZXh0IHRvIGluc2VydCBiZXR3ZWVuIHBhZ2VzIHdoZW4gZXhwb3J0aW5nIHdpdGggYmFzZVVSTC4nKVxyXG5cdFx0XHQuYWRkVGV4dCh0ZXh0ID0+IHRleHRcclxuXHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoJ2UueC4gPCEtLW5leHRwYWdlLS0+JylcclxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MucGFnZVNlcGFyYXRvcilcclxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5wYWdlU2VwYXJhdG9yID0gdmFsdWVcclxuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpXHJcblx0XHRcdFx0fSkpO1xyXG4gICAgXHJcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgLnNldE5hbWUoJ05ldyBwYWdlIGhlYWRpbmcgbGV2ZWwnKVxyXG4gICAgICAuc2V0RGVzYygnVGhlIGhlYWRpbmcgbGV2ZWwgdGhhdCBtYXJrcyB0aGUgc3RhcnQgb2YgYSBuZXcgcGFnZS4nKVxyXG4gICAgICAuYWRkRHJvcGRvd24oZHJvcGRvd24gPT4gZHJvcGRvd25cclxuICAgICAgICAuYWRkT3B0aW9uKCdIMScsICdIMScpXHJcbiAgICAgICAgLmFkZE9wdGlvbignSDInLCAnSDInKVxyXG4gICAgICAgIC5hZGRPcHRpb24oJ0gzJywgJ0gzJylcclxuICAgICAgICAuYWRkT3B0aW9uKCdINCcsICdINCcpXHJcbiAgICAgICAgLmFkZE9wdGlvbignSDUnLCAnSDUnKVxyXG4gICAgICAgIC5hZGRPcHRpb24oJ0g2JywgJ0g2JylcclxuICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaGVhZGluZ0xldmVsKVxyXG4gICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmhlYWRpbmdMZXZlbCA9IHZhbHVlXHJcbiAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKVxyXG4gICAgICAgIH0pKVxyXG5cdH1cclxufSJdLCJuYW1lcyI6WyJnZXRMaW5rcGF0aCIsIk5vdGljZSIsIk1vZGFsIiwiU2V0dGluZyIsIlBsdWdpbiIsImFkZEljb24iLCJQbHVnaW5TZXR0aW5nVGFiIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBdURBO0FBQ08sU0FBUyxTQUFTLENBQUMsT0FBTyxFQUFFLFVBQVUsRUFBRSxDQUFDLEVBQUUsU0FBUyxFQUFFO0FBQzdELElBQUksU0FBUyxLQUFLLENBQUMsS0FBSyxFQUFFLEVBQUUsT0FBTyxLQUFLLFlBQVksQ0FBQyxHQUFHLEtBQUssR0FBRyxJQUFJLENBQUMsQ0FBQyxVQUFVLE9BQU8sRUFBRSxFQUFFLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFO0FBQ2hILElBQUksT0FBTyxLQUFLLENBQUMsS0FBSyxDQUFDLEdBQUcsT0FBTyxDQUFDLEVBQUUsVUFBVSxPQUFPLEVBQUUsTUFBTSxFQUFFO0FBQy9ELFFBQVEsU0FBUyxTQUFTLENBQUMsS0FBSyxFQUFFLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLE9BQU8sQ0FBQyxFQUFFLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRTtBQUNuRyxRQUFRLFNBQVMsUUFBUSxDQUFDLEtBQUssRUFBRSxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLE9BQU8sQ0FBQyxFQUFFLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRTtBQUN0RyxRQUFRLFNBQVMsSUFBSSxDQUFDLE1BQU0sRUFBRSxFQUFFLE1BQU0sQ0FBQyxJQUFJLEdBQUcsT0FBTyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsR0FBRyxLQUFLLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTLEVBQUUsUUFBUSxDQUFDLENBQUMsRUFBRTtBQUN0SCxRQUFRLElBQUksQ0FBQyxDQUFDLFNBQVMsR0FBRyxTQUFTLENBQUMsS0FBSyxDQUFDLE9BQU8sRUFBRSxVQUFVLElBQUksRUFBRSxDQUFDLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQztBQUM5RSxLQUFLLENBQUMsQ0FBQztBQUNQOztNQ3JFYSxjQUFjO0lBSXZCLFlBQ2EsR0FBUSxFQUNSLCtCQUF3QyxFQUN4QyxVQUFtQixFQUNuQixnQkFBeUIsRUFDekIsMkJBQW9DLEVBQ3BDLE9BQWUsRUFDZixhQUFxQixFQUNyQixZQUFvQjtRQVBwQixRQUFHLEdBQUgsR0FBRyxDQUFLO1FBQ1Isb0NBQStCLEdBQS9CLCtCQUErQixDQUFTO1FBQ3hDLGVBQVUsR0FBVixVQUFVLENBQVM7UUFDbkIscUJBQWdCLEdBQWhCLGdCQUFnQixDQUFTO1FBQ3pCLGdDQUEyQixHQUEzQiwyQkFBMkIsQ0FBUztRQUNwQyxZQUFPLEdBQVAsT0FBTyxDQUFRO1FBQ2Ysa0JBQWEsR0FBYixhQUFhLENBQVE7UUFDckIsaUJBQVksR0FBWixZQUFZLENBQVE7UUFYakMsU0FBSSxHQUFXLENBQUMsQ0FBQTtRQUNoQixhQUFRLEdBQThCLEVBQUUsQ0FBQTtLQVdwQztJQUVFLE9BQU8sQ0FBQyxJQUFXLEVBQUUsUUFBZ0IsQ0FBQzs7WUFDeEMsSUFBSSxZQUFZLEdBQUcsTUFBTSxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUE7WUFDbEQsTUFBTSxRQUFRLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxhQUFhLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxDQUFBO1lBRTFELElBQUksWUFBWSxHQUFrQixFQUFFLENBQUE7WUFFcEMsSUFBSSxRQUFRLENBQUMsUUFBUSxJQUFJLElBQUksQ0FBQywyQkFBMkIsRUFBRTtnQkFDdkQsUUFBUSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBQyxPQUFPO29CQUM5QixJQUFJLE9BQU8sQ0FBQyxLQUFLLElBQUksSUFBSSxDQUFDLCtCQUErQixHQUFHLEtBQUssR0FBRyxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUMsWUFBWSxFQUFFO3dCQUN6RixJQUFJLFFBQVEsR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUE7d0JBQzVDLElBQUksV0FBVyxHQUFHLEtBQUssQ0FBQTt3QkFDdkIsSUFBSSxPQUFPLEdBQUcsS0FBSyxDQUFBO3dCQUNuQixPQUFPLFFBQVEsR0FBRyxDQUFDLEVBQUU7NEJBQ2pCLFFBQVEsSUFBSSxDQUFDLENBQUE7NEJBQ2IsSUFBSSxPQUFPLEVBQUU7Z0NBQ1QsSUFBSSxZQUFZLENBQUMsUUFBUSxDQUFDLElBQUksR0FBRyxFQUFFO29DQUMvQixXQUFXLEdBQUcsSUFBSSxDQUFBO29DQUNsQixNQUFLO2lDQUNSO3FDQUFNLElBQUksWUFBWSxDQUFDLFFBQVEsQ0FBQyxJQUFJLEdBQUcsRUFBRTtvQ0FDdEMsTUFBSztpQ0FDUjs2QkFDSjtpQ0FBTSxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEVBQUU7Z0NBQzFDLFNBQVE7NkJBQ1g7aUNBQU0sSUFBSSxZQUFZLENBQUMsUUFBUSxDQUFDLElBQUksR0FBRyxFQUFFO2dDQUN0QyxPQUFPLEdBQUcsSUFBSSxDQUFBOzZCQUNqQjtpQ0FBTTtnQ0FDSCxNQUFLOzZCQUNSO3lCQUNKO3dCQUVELFlBQVksQ0FBQyxJQUFJLENBQUM7NEJBQ2QsS0FBSyxFQUFFLFdBQVcsR0FBRyxRQUFRLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsTUFBTTs0QkFDN0QsR0FBRyxFQUFFLFdBQVcsR0FBRyxRQUFRLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsTUFBTTs0QkFDM0QsTUFBTSxFQUFFLEtBQUssSUFBSSxDQUFDLGFBQWEsSUFBSTt5QkFDdEMsQ0FBQyxDQUFBO3FCQUNMO2lCQUNKLENBQUMsQ0FBQTthQUNMO1lBRUQsSUFBSSxRQUFRLENBQUMsUUFBUSxJQUFJLElBQUksQ0FBQywrQkFBK0IsSUFBSSxLQUFLLEdBQUcsQ0FBQyxFQUFFO2dCQUN4RSxRQUFRLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxDQUFDLE9BQU87b0JBQzlCLElBQUksT0FBTyxDQUFDLEtBQUssR0FBRyxDQUFDLEVBQUU7d0JBQ25CLE1BQU0sU0FBUyxHQUFHLFlBQVksQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLE9BQU8sQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFBO3dCQUMxRSxZQUFZLENBQUMsSUFBSSxDQUFDOzRCQUNkLEtBQUssRUFBRSxTQUFTOzRCQUNoQixHQUFHLEVBQUUsU0FBUzs0QkFDZCxNQUFNLEVBQUUsR0FBRyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLEtBQUssR0FBRyxLQUFLLEVBQUUsQ0FBQyxDQUFDLEdBQUcsT0FBTyxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsQ0FBQzt5QkFDdEYsQ0FBQyxDQUFBO3FCQUNMO2lCQUNKLENBQUMsQ0FBQTthQUNMO1lBRUQsSUFBSSxJQUFJLENBQUMsVUFBVSxJQUFJLFFBQVEsQ0FBQyxXQUFXLEVBQUU7Z0JBQ3pDLFlBQVksQ0FBQyxJQUFJLENBQUM7b0JBQ2QsS0FBSyxFQUFFLFFBQVEsQ0FBQyxXQUFXLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxNQUFNO29CQUNqRCxHQUFHLEVBQUUsUUFBUSxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLE1BQU07b0JBQzdDLE1BQU0sRUFBRSxFQUFFO2lCQUNiLENBQUMsQ0FBQTthQUNMO1lBRUQsSUFBSSxRQUFRLENBQUMsTUFBTSxFQUFFO2dCQUNqQixLQUFLLE1BQU0sS0FBSyxJQUFJLFFBQVEsQ0FBQyxNQUFNLEVBQUU7b0JBQ2pDLE1BQU0sUUFBUSxHQUFHQSxvQkFBVyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQTtvQkFDeEMsTUFBTSxVQUFVLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxhQUFhLENBQUMsb0JBQW9CLENBQzFELFFBQVEsRUFDUixJQUFJLENBQUMsSUFBSSxDQUNaLENBQUE7b0JBQ0QsSUFBSSxVQUFVLElBQUksVUFBVSxDQUFDLFNBQVMsQ0FBQyxXQUFXLEVBQUUsSUFBSSxJQUFJLEVBQUU7d0JBQzFELE1BQU0sMkJBQTJCLEdBQUcsTUFBTSxJQUFJLENBQUMsT0FBTyxDQUFDLFVBQVUsRUFBRSxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQTt3QkFFMUYsWUFBWSxDQUFDLElBQUksQ0FBQzs0QkFDZCxLQUFLLEVBQUUsS0FBSyxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsTUFBTTs0QkFDbEMsR0FBRyxFQUFFLEtBQUssQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLE1BQU07NEJBQzlCLE1BQU0sRUFBRSwyQkFBMkIsR0FBRyxJQUFJO3lCQUM3QyxDQUFDLENBQUE7cUJBQ0w7aUJBQ0o7YUFDSjtZQUVELFlBQVksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFBO1lBQzlDLFlBQVksQ0FBQyxPQUFPLEVBQUUsQ0FBQyxPQUFPLENBQUMsQ0FBQyxXQUFXO2dCQUN2QyxZQUFZLEdBQUcsWUFBWSxDQUFDLFNBQVMsQ0FBQyxDQUFDLEVBQUUsV0FBVyxDQUFDLEtBQUssQ0FBQyxHQUFHLFdBQVcsQ0FBQyxNQUFNLEdBQUcsWUFBWSxDQUFDLFNBQVMsQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLENBQUE7YUFDN0gsQ0FBQyxDQUFBO1lBQ0YsT0FBTyxZQUFZLENBQUMsSUFBSSxFQUFFLENBQUE7U0FDN0I7S0FBQTtJQUVELFlBQVksQ0FBQyxZQUFvQjs7UUFDN0IsTUFBTSxTQUFTLEdBQUcsd0RBQXdELENBQUE7UUFDMUUsSUFBSSxlQUFlLEdBQUcsWUFBWSxDQUFBO1FBQ2xDLElBQUksWUFBWSxHQUFrQixFQUFFLENBQUE7UUFFcEMsSUFBSSxLQUE2QixDQUFBO1FBQ2pDLE9BQU8sQ0FBQyxLQUFLLEdBQUcsU0FBUyxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsTUFBTSxJQUFJLEVBQUU7WUFDcEQsSUFBSSxJQUFJLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFBO1lBQ25CLElBQUksSUFBSSxDQUFDLDJCQUEyQixFQUFFO2dCQUNsQyxJQUFJLEtBQUssR0FBRyxZQUFZLENBQUMsS0FBSyxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsQ0FBQTtnQkFDM0MsSUFBSSxLQUFLLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRTtvQkFDbEIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxrQkFBa0IsR0FBRyxJQUFJLEdBQUcsY0FBYyxDQUFDLENBQUE7aUJBQzFEO3FCQUFNLElBQUksS0FBSyxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUU7b0JBQ3pCLElBQUlDLGVBQU0sQ0FBQyxrQkFBa0IsR0FBRyxJQUFJLEdBQUcseUJBQXlCLENBQUMsQ0FBQTtvQkFDakUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxrQkFBa0IsR0FBRyxJQUFJLEdBQUcseUJBQXlCLENBQUMsQ0FBQTtpQkFDckU7cUJBQU07b0JBQ0gsSUFBSSxJQUFJLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxJQUFJLE1BQU0sQ0FBQyxJQUFJLENBQUMsYUFBYSxFQUFFLEdBQUcsQ0FBQyxDQUFDLElBQUksRUFBRSxFQUFFLE1BQU0sR0FBRyxDQUFDLENBQUE7b0JBQ25ILElBQUksS0FBSyxHQUFHLE1BQUEsS0FBSyxDQUFDLENBQUMsQ0FBQyxvQ0FBSyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLE1BQU0sSUFBSSxFQUFFLEdBQUcsSUFBSSxDQUFDLENBQUE7b0JBQ25FLFlBQVksQ0FBQyxJQUFJLENBQUM7d0JBQ2QsS0FBSyxFQUFFLEtBQUssQ0FBQyxLQUFLO3dCQUNsQixHQUFHLEVBQUUsS0FBSyxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTTt3QkFDbEMsTUFBTSxFQUFFLElBQUksS0FBSyxLQUFLLElBQUksQ0FBQyxPQUFPLElBQUksSUFBSSxLQUFLLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsRUFBRSxDQUFDLENBQUMsT0FBTyxDQUFDLElBQUksRUFBRSxFQUFFLENBQUMsR0FBRztxQkFDL0gsQ0FBQyxDQUFBO2lCQUNMO2FBQ0o7aUJBQU0sSUFBSSxJQUFJLENBQUMsZ0JBQWdCLEVBQUU7Z0JBQzlCLFlBQVksQ0FBQyxJQUFJLENBQUM7b0JBQ2QsS0FBSyxFQUFFLEtBQUssQ0FBQyxLQUFLO29CQUNkLEdBQUcsRUFBRSxLQUFLLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNO29CQUNsQyxNQUFNLEVBQUUsSUFBSSxJQUFJLEtBQUssU0FBUyxDQUFDLHlCQUF5QixJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxPQUFPLEVBQUUsU0FBUyxJQUFJLEtBQUssQ0FBQyxHQUFHO2lCQUM3RyxDQUFDLENBQUE7YUFDTDtTQUNKO1FBRUQsWUFBWSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUE7UUFDOUMsWUFBWSxDQUFDLE9BQU8sRUFBRSxDQUFDLE9BQU8sQ0FBQyxDQUFDLFdBQVc7WUFDdkMsZUFBZSxHQUFHLGVBQWUsQ0FBQyxTQUFTLENBQUMsQ0FBQyxFQUFFLFdBQVcsQ0FBQyxLQUFLLENBQUMsR0FBRyxXQUFXLENBQUMsTUFBTSxHQUFHLGVBQWUsQ0FBQyxTQUFTLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxDQUFBO1NBQ3RJLENBQUMsQ0FBQTtRQUNGLE9BQU8sZUFBZSxDQUFDLElBQUksRUFBRSxDQUFBO0tBQ2hDOzs7TUMvSVEsYUFBYyxTQUFRQyxjQUFLO0lBTXZDLFlBQXFCLE1BQW9CO1FBQUksS0FBSyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQTtRQUF6QyxXQUFNLEdBQU4sTUFBTSxDQUFjO1FBTHpDLGlCQUFZLEdBQVcsVUFBVSxDQUFBO1FBQ2pDLG9DQUErQixHQUFZLElBQUksQ0FBQTtRQUMvQyxlQUFVLEdBQVksSUFBSSxDQUFBO1FBQzFCLGdDQUEyQixHQUFZLEtBQUssQ0FBQTtLQUVvQjtJQUVoRSxNQUFNO1FBQ0wsSUFBSSxFQUFDLFNBQVMsRUFBQyxHQUFHLElBQUksQ0FBQTtRQUN0QixNQUFNLFlBQVksR0FBRyxJQUFJQyxnQkFBTyxDQUFDLFNBQVMsQ0FBQyxDQUFBO1FBQzNDLFlBQVksQ0FBQyxPQUFPLENBQUMsZUFBZSxDQUFDLENBQUE7UUFDckMsWUFBWSxDQUFDLFdBQVcsQ0FBQyxDQUFDLFFBQVE7WUFDakMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxVQUFVLEVBQUUsVUFBVSxDQUFDLENBQUE7WUFDMUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxXQUFXLEVBQUUsV0FBVyxDQUFDLENBQUE7WUFDNUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUE7WUFDcEMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEtBQUssT0FBTyxJQUFJLENBQUMsWUFBWSxHQUFHLEtBQUssQ0FBQSxFQUFFLENBQUMsQ0FBQTtTQUMzRCxDQUFDLENBQUE7UUFFRixNQUFNLGVBQWUsR0FBRyxJQUFJQSxnQkFBTyxDQUFDLFNBQVMsQ0FBQyxDQUFBO1FBQzlDLGVBQWUsQ0FBQyxPQUFPLENBQUMsdUNBQXVDLENBQUMsQ0FBQTtRQUNoRSxlQUFlLENBQUMsU0FBUyxDQUFDLENBQUMsTUFBTTtZQUNoQyxNQUFNLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQywrQkFBK0IsQ0FBQyxDQUFBO1lBQ3JELE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQyxLQUFLLE9BQU8sSUFBSSxDQUFDLCtCQUErQixHQUFHLEtBQUssQ0FBQSxFQUFFLENBQUMsQ0FBQTtTQUM1RSxDQUFDLENBQUE7UUFFRixNQUFNLFVBQVUsR0FBRyxJQUFJQSxnQkFBTyxDQUFDLFNBQVMsQ0FBQyxDQUFBO1FBQ3pDLFVBQVUsQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLENBQUE7UUFDakMsVUFBVSxDQUFDLFNBQVMsQ0FBQyxDQUFDLE1BQU07WUFDM0IsTUFBTSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUE7WUFDaEMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEtBQUssT0FBTyxJQUFJLENBQUMsVUFBVSxHQUFHLEtBQUssQ0FBQSxFQUFFLENBQUMsQ0FBQTtTQUN2RCxDQUFDLENBQUE7UUFFRixNQUFNLGFBQWEsR0FBRyxJQUFJQSxnQkFBTyxDQUFDLFNBQVMsQ0FBQyxDQUFBO1FBQzVDLGFBQWEsQ0FBQyxPQUFPLENBQUMsa0NBQWtDLENBQUMsQ0FBQTtRQUN6RCxhQUFhLENBQUMsU0FBUyxDQUFDLENBQUMsTUFBTTtZQUM5QixNQUFNLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQywyQkFBMkIsQ0FBQyxDQUFBO1lBQ2pELE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQyxLQUFLLE9BQU8sSUFBSSxDQUFDLDJCQUEyQixHQUFHLEtBQUssQ0FBQSxFQUFFLENBQUMsQ0FBQTtTQUN4RSxDQUFDLENBQUE7UUFFRixNQUFNLFVBQVUsR0FBRyxJQUFJQSxnQkFBTyxDQUFDLFNBQVMsQ0FBQyxDQUFBO1FBQ3pDLFVBQVUsQ0FBQyxTQUFTLENBQUMsQ0FBQyxNQUFNO1lBQzNCLE1BQU0sQ0FBQyxhQUFhLENBQUMsTUFBTSxDQUFDLENBQUE7WUFDNUIsTUFBTSxDQUFDLE1BQU0sRUFBRSxDQUFBO1lBQ2YsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFPLEtBQUs7O2dCQUNkLE1BQU0sVUFBVSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLGFBQWEsRUFBRSxDQUFBO2dCQUNqRSxNQUFNLFFBQVEsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLGFBQWEsQ0FBQyxZQUFZLENBQUMsVUFBVSxDQUFDLENBQUE7Z0JBRWhFLElBQUksSUFBSSxDQUFDLDJCQUEyQixLQUFLLENBQUMsUUFBUSxDQUFDLFdBQVcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxXQUFXLENBQUMsU0FBUyxDQUFDLENBQUMsRUFBRTtvQkFDcEcsSUFBSUYsZUFBTSxDQUFDLG1CQUFtQixDQUFDLENBQUE7b0JBQy9CLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQTtvQkFDWixPQUFNO2lCQUNOO2dCQUNELE1BQU0sY0FBYyxHQUFHLElBQUksY0FBYyxDQUN4QyxJQUFJLENBQUMsR0FBRyxFQUNPLElBQUksQ0FBQywrQkFBK0IsRUFDbkQsSUFBSSxDQUFDLFVBQVUsRUFDQSxJQUFJLENBQUMsWUFBWSxJQUFJLFVBQVUsSUFBSSxDQUFDLElBQUksQ0FBQywyQkFBMkIsRUFDbkYsSUFBSSxDQUFDLDJCQUEyQixFQUNoQyxNQUFBLFFBQVEsQ0FBQyxXQUFXLDBDQUFHLFNBQVMsQ0FBQyxFQUNqQyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxhQUFhLEVBQ2xDLFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FDOUMsQ0FBQTtnQkFDRCxNQUFNLFNBQVMsR0FBRyxNQUFNLGNBQWMsQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDLENBQUE7Z0JBQzFELE1BQU0sZUFBZSxHQUFHLGNBQWMsQ0FBQyxZQUFZLENBQUMsU0FBUyxDQUFDLENBQUE7Z0JBQzlELFFBQVEsSUFBSSxDQUFDLFlBQVk7b0JBQ3hCLEtBQUssVUFBVTt3QkFDSSxNQUFNLGFBQWEsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFdBQVcsQ0FBQyxnQkFBZ0IsQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUE7d0JBRTlGLElBQUksWUFBWSxDQUFDO3dCQUNqQixJQUFJLFFBQVEsR0FBRyxRQUFRLENBQUMsUUFBUSxDQUFBO3dCQUNoQyxJQUFJLFFBQVEsRUFBRTs0QkFDYixZQUFZLEdBQUcsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDLE9BQU8sS0FBSyxPQUFPLENBQUMsS0FBSyxJQUFJLENBQUMsQ0FBQyxDQUFBO3lCQUM3RDt3QkFFaUIsSUFBSSxRQUFRLEdBQUcsYUFBYSxDQUFBO3dCQUM5QyxJQUFJLEdBQUcsR0FBRyxDQUFDLENBQUE7d0JBQ08sSUFBSSxZQUFZLEVBQUU7NEJBQ2QsUUFBUSxHQUFHLEdBQUcsWUFBWSxDQUFDLE9BQU8sS0FBSyxDQUFBOzRCQUN2QyxPQUFPLE1BQU0sSUFBSSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxhQUFhLENBQUMsSUFBSSxHQUFHLFFBQVEsQ0FBQyxFQUFFO2dDQUN2RSxRQUFRLEdBQUcsR0FBRyxZQUFZLENBQUMsT0FBTyxJQUFJLEdBQUcsS0FBSyxDQUFBO2dDQUM5QyxHQUFHLEVBQUUsQ0FBQTs2QkFDUjt5QkFDSjs2QkFBTTs0QkFDSCxPQUFPLE1BQU0sSUFBSSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxhQUFhLENBQUMsSUFBSSxHQUFHLFFBQVEsQ0FBQyxFQUFFO2dDQUN2RSxRQUFRLEdBQUcsWUFBWSxHQUFHLEtBQUssQ0FBQTtnQ0FDL0IsR0FBRyxFQUFFLENBQUE7NkJBQ1I7eUJBQ0o7d0JBQ0QsTUFBTSxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsYUFBYSxDQUFDLElBQUksR0FBRyxRQUFRLEVBQUUsZUFBZSxDQUFDLENBQUE7d0JBQzNFLE1BQU0sSUFBSSxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsWUFBWSxDQUFDLGFBQWEsQ0FBQyxJQUFJLEdBQUcsUUFBUSxFQUFFLEVBQUUsQ0FBQyxDQUFBO3dCQUN4RSxJQUFJQSxlQUFNLENBQUMsZUFBZSxRQUFRLEdBQUcsQ0FBQyxDQUFBO3dCQUN0QyxNQUFLO29CQUN4QixLQUFLLFdBQVc7d0JBQ2YsU0FBUyxDQUFDLFNBQVMsQ0FBQyxTQUFTLENBQUMsZUFBZSxDQUFDLENBQUE7d0JBQzlDLElBQUlBLGVBQU0sQ0FBQyx3QkFBd0IsQ0FBQyxDQUFBO3dCQUNsQixNQUFLO2lCQUN4QjtnQkFDRCxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUE7YUFDWixDQUFBLENBQUMsQ0FBQTtTQUNGLENBQUMsQ0FBQTtLQUNGO0lBRUQsT0FBTztRQUNOLElBQUksRUFBRSxTQUFTLEVBQUUsR0FBRyxJQUFJLENBQUE7UUFDeEIsU0FBUyxDQUFDLEtBQUssRUFBRSxDQUFBO0tBQ2pCOzs7QUNyR0YsTUFBTSxnQkFBZ0IsR0FBeUI7SUFDOUMsYUFBYSxFQUFFLGlCQUFpQjtJQUMvQixZQUFZLEVBQUUsSUFBSTtDQUNuQixDQUFBO01BR29CLFlBQWEsU0FBUUcsZUFBTTtJQUd6QyxNQUFNOztZQUNULE1BQU0sSUFBSSxDQUFDLFlBQVksRUFBRSxDQUFBO1lBRXpCQyxnQkFBTyxDQUFDLGNBQWMsRUFBRSx3MURBQXcxRCxDQUFDLENBQUE7WUFFajNEQSxnQkFBTyxDQUFDLGtCQUFrQixFQUFFLHNqRkFBc2pGLENBQUMsQ0FBQTtZQUVubEYsSUFBSSxDQUFDLGFBQWEsQ0FBQyxJQUFJLHNCQUFzQixDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQTtZQUVoRSxJQUFJLENBQUMsVUFBVSxDQUFDO2dCQUNmLEVBQUUsRUFBRSw2QkFBNkI7Z0JBQ2pDLElBQUksRUFBRSw2QkFBNkI7Z0JBQ2hDLElBQUksRUFBRSxjQUFjO2dCQUN2QixRQUFRLEVBQUU7b0JBQ1QsTUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsYUFBYSxFQUFFLENBQUE7b0JBQy9DLElBQUksSUFBSSxLQUFLLElBQUksRUFBRTt3QkFDbEIsSUFBSSxhQUFhLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUE7d0JBQzlCLE9BQU8sSUFBSSxDQUFBO3FCQUNYO29CQUNELE9BQU8sS0FBSyxDQUFBO2lCQUNaO2FBQ0QsQ0FBQyxDQUFBO1lBQ0EsSUFBSSxJQUFJLENBQUMsR0FBRyxDQUFDLFFBQVEsRUFBRTtnQkFDckIsSUFBSSxDQUFDLFVBQVUsQ0FBQztvQkFDZCxFQUFFLEVBQUUsNEJBQTRCO29CQUNoQyxJQUFJLEVBQUUsNEJBQTRCO29CQUNsQyxJQUFJLEVBQUUsY0FBYztvQkFDcEIsUUFBUSxFQUFFO3dCQUNSLE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLGFBQWEsRUFBRSxDQUFBO3dCQUMvQyxJQUFJLElBQUksS0FBSyxJQUFJLEVBQUU7NEJBQ2pCLE1BQU0sY0FBYyxHQUFHLElBQUksY0FBYyxDQUNyQyxJQUFJLENBQUMsR0FBRyxFQUNSLElBQUksRUFDSixJQUFJLEVBQ0osSUFBSSxFQUNKLEtBQUssRUFDTCxFQUFFLEVBQ0YsRUFBRSxFQUNGLENBQUMsQ0FDSixDQUFBOzRCQUNELE1BQU0sU0FBUyxHQUFHLE1BQU0sY0FBYyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQTs0QkFDcEQsTUFBTSxlQUFlLEdBQUcsY0FBYyxDQUFDLFlBQVksQ0FBQyxTQUFTLENBQUMsQ0FBQTs0QkFFOUQsTUFBTSxLQUFLLEdBQUc7Z0NBQ1osSUFBSSxFQUFFLGVBQWU7NkJBQ3RCLENBQUE7NEJBQ0QsU0FBUyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQTs0QkFDdEIsT0FBTyxJQUFJLENBQUE7eUJBQ1o7d0JBQ0QsT0FBTyxLQUFLLENBQUE7cUJBQ2IsQ0FBQTtpQkFDRixDQUFDLENBQUE7Z0JBQ0YsSUFBSSxDQUFDLFVBQVUsQ0FBQztvQkFDZCxFQUFFLEVBQUUsb0NBQW9DO29CQUN4QyxJQUFJLEVBQUUseUNBQXlDO29CQUMvQyxJQUFJLEVBQUUsa0JBQWtCO29CQUN4QixRQUFRLEVBQUU7O3dCQUNSLE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLGFBQWEsRUFBRSxDQUFBO3dCQUMvQyxJQUFJLElBQUksS0FBSyxJQUFJLEVBQUU7NEJBQ2pCLE1BQU0sUUFBUSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsYUFBYSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsQ0FBQTs0QkFDMUQsSUFBSSxNQUFBLFFBQVEsQ0FBQyxXQUFXLDBDQUFHLFNBQVMsQ0FBQyxFQUFFO2dDQUNyQyxNQUFNLGNBQWMsR0FBRyxJQUFJLGNBQWMsQ0FDdkMsSUFBSSxDQUFDLEdBQUcsRUFDUixJQUFJLEVBQ0osSUFBSSxFQUNKLEtBQUssRUFDTCxJQUFJLEVBQ0osUUFBUSxDQUFDLFdBQVcsQ0FBQyxTQUFTLENBQUMsRUFDL0IsSUFBSSxDQUFDLFFBQVEsQ0FBQyxhQUFhLEVBQzNCLFFBQVEsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUN4QyxDQUFBO2dDQUNELE1BQU0sU0FBUyxHQUFHLE1BQU0sY0FBYyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQTtnQ0FDcEQsTUFBTSxlQUFlLEdBQUcsY0FBYyxDQUFDLFlBQVksQ0FBQyxTQUFTLENBQUMsQ0FBQTtnQ0FDOUQsTUFBTSxLQUFLLEdBQUc7b0NBQ1osSUFBSSxFQUFFLGVBQWU7aUNBQ3RCLENBQUE7Z0NBQ0QsU0FBUyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQTtnQ0FDdEIsT0FBTyxJQUFJLENBQUE7NkJBQ1o7aUNBQU07Z0NBQ0wsSUFBSUosZUFBTSxDQUFDLHVCQUF1QixDQUFDLENBQUE7Z0NBQ25DLE9BQU8sS0FBSyxDQUFBOzZCQUNiO3lCQUNGO3dCQUNELE9BQU8sS0FBSyxDQUFBO3FCQUNiLENBQUE7aUJBQ0YsQ0FBQyxDQUFBO2FBQ0g7U0FDSDtLQUFBO0lBRU0sWUFBWTs7WUFDbEIsSUFBSSxDQUFDLFFBQVEsR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUUsRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFBO1NBQzFFO0tBQUE7SUFFSyxZQUFZOztZQUNqQixNQUFNLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFBO1NBQ2xDO0tBQUE7Q0FDRDtBQUVELE1BQU0sc0JBQXVCLFNBQVFLLHlCQUFnQjtJQUdwRCxZQUFZLEdBQVEsRUFBRSxNQUFvQjtRQUN6QyxLQUFLLENBQUMsR0FBRyxFQUFFLE1BQU0sQ0FBQyxDQUFBO1FBQ2xCLElBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFBO0tBQ3BCO0lBRUQsT0FBTztRQUNOLElBQUksRUFBQyxXQUFXLEVBQUMsR0FBRyxJQUFJLENBQUE7UUFFeEIsV0FBVyxDQUFDLEtBQUssRUFBRSxDQUFBO1FBRW5CLFdBQVcsQ0FBQyxRQUFRLENBQUMsSUFBSSxFQUFFLEVBQUMsSUFBSSxFQUFFLHNEQUFzRCxFQUFDLENBQUMsQ0FBQTtRQUUxRixJQUFJSCxnQkFBTyxDQUFDLFdBQVcsQ0FBQzthQUN0QixPQUFPLENBQUMsZ0JBQWdCLENBQUM7YUFDekIsT0FBTyxDQUFDLCtEQUErRCxDQUFDO2FBQ3hFLE9BQU8sQ0FBQyxJQUFJLElBQUksSUFBSTthQUNuQixjQUFjLENBQUMsc0JBQXNCLENBQUM7YUFDdEMsUUFBUSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLGFBQWEsQ0FBQzthQUM1QyxRQUFRLENBQUMsQ0FBTyxLQUFLO1lBQ3JCLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLGFBQWEsR0FBRyxLQUFLLENBQUE7WUFDMUMsTUFBTSxJQUFJLENBQUMsTUFBTSxDQUFDLFlBQVksRUFBRSxDQUFBO1NBQ2hDLENBQUEsQ0FBQyxDQUFDLENBQUM7UUFFSixJQUFJQSxnQkFBTyxDQUFDLFdBQVcsQ0FBQzthQUNyQixPQUFPLENBQUMsd0JBQXdCLENBQUM7YUFDakMsT0FBTyxDQUFDLHVEQUF1RCxDQUFDO2FBQ2hFLFdBQVcsQ0FBQyxRQUFRLElBQUksUUFBUTthQUM5QixTQUFTLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQzthQUNyQixTQUFTLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQzthQUNyQixTQUFTLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQzthQUNyQixTQUFTLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQzthQUNyQixTQUFTLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQzthQUNyQixTQUFTLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQzthQUNyQixRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsWUFBWSxDQUFDO2FBQzNDLFFBQVEsQ0FBQyxDQUFPLEtBQUs7WUFDcEIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsWUFBWSxHQUFHLEtBQUssQ0FBQTtZQUN6QyxNQUFNLElBQUksQ0FBQyxNQUFNLENBQUMsWUFBWSxFQUFFLENBQUE7U0FDakMsQ0FBQSxDQUFDLENBQUMsQ0FBQTtLQUNUOzs7OzsifQ==
