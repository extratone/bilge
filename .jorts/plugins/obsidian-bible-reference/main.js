/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __markAsModule = (target) => __defProp(target, "__esModule", { value: true });
var __export = (target, all) => {
  __markAsModule(target);
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __reExport = (target, module2, desc) => {
  if (module2 && typeof module2 === "object" || typeof module2 === "function") {
    for (let key of __getOwnPropNames(module2))
      if (!__hasOwnProp.call(target, key) && key !== "default")
        __defProp(target, key, { get: () => module2[key], enumerable: !(desc = __getOwnPropDesc(module2, key)) || desc.enumerable });
  }
  return target;
};
var __toModule = (module2) => {
  return __reExport(__markAsModule(__defProp(module2 != null ? __create(__getProtoOf(module2)) : {}, "default", module2 && module2.__esModule && "default" in module2 ? { get: () => module2.default, enumerable: true } : { value: module2, enumerable: true })), module2);
};
var __async = (__this, __arguments, generator) => {
  return new Promise((resolve, reject) => {
    var fulfilled = (value) => {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    };
    var rejected = (value) => {
      try {
        step(generator.throw(value));
      } catch (e) {
        reject(e);
      }
    };
    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);
    step((generator = generator.apply(__this, __arguments)).next());
  });
};

// main.ts
__export(exports, {
  default: () => BibleReferencePlugin
});
var import_obsidian2 = __toModule(require("obsidian"));

// src/constants.ts
var APP_NAMING = {
  appName: "Bible Reference",
  appAuthor: "tim-hub",
  appUrl: "",
  defaultStatus: ""
};
var DEFAULT_SETTINGS = {
  language: "en",
  version: "WEB"
};

// src/VerseSuggester.ts
var import_obsidian = __toModule(require("obsidian"));

// src/VerseTypoCheck.ts
var shortReg = /\-{2}([123])*[A-z]{3,}\d{1,3}\:\d{1,3}(\-\d{1,3})*/;
var VerseTypoCheck = (verse) => {
  var _a;
  return (_a = verse.match(shortReg)) == null ? void 0 : _a.first();
};

// src/SuggestingVerse.ts
var SuggestingVerse = class {
  constructor(bookName, chapterNumber, verseNumber, verseNumberEnd, version = "web", language = "en") {
    this.bookName = bookName;
    this.chapterNumber = chapterNumber;
    this.verseNumber = verseNumber;
    this.verseNumberEnd = verseNumberEnd;
    this.bookName = bookName;
    this.chapterNumber = chapterNumber;
    this.verseNumber = verseNumber;
    this.verseNumberEnd = verseNumberEnd;
    this.version = version;
    this.language = language;
  }
  get queryString() {
    let queryString = `${this.bookName}+${this.chapterNumber}:`;
    if ((this == null ? void 0 : this.verseNumberEnd) > 0) {
      queryString += `${this.verseNumber}-${this.verseNumberEnd}`;
    } else {
      queryString += `${this.verseNumber}`;
    }
    return queryString;
  }
  getVerses() {
    return __async(this, null, function* () {
      const url = `https://bible-api.com/${this.queryString}`;
      const response = yield fetch(url);
      const data = yield response.json();
      return data.verses;
    });
  }
  fetchAndSetVersesText() {
    return __async(this, null, function* () {
      const verses = yield this.getVerses();
      let text = "";
      verses.forEach((verse) => {
        text += verse.text;
      });
      this.text = text;
    });
  }
  getVerseReference() {
    return `-- ${this.bookName} ${this.chapterNumber}:${this.verseNumber}${this.verseNumberEnd ? `-${this.verseNumberEnd}` : ""}`;
  }
};

// src/VerseSuggester.ts
var VerseSuggester = class extends import_obsidian.EditorSuggest {
  constructor(plugin) {
    super(plugin.app);
    this.plugin = plugin;
  }
  onTrigger(cursor, editor, _) {
    const currentContent = editor.getLine(cursor.line).substring(0, cursor.ch);
    const match = VerseTypoCheck(currentContent);
    if (match) {
      console.debug("trigger on", currentContent);
      const editorSuggestTriggerInfo = {
        end: cursor,
        start: {
          line: cursor.line,
          ch: currentContent.lastIndexOf(match)
        },
        query: match
      };
      return editorSuggestTriggerInfo;
    }
    return null;
  }
  getSuggestions(context) {
    return __async(this, null, function* () {
      console.debug("get suggestion for query ", context.query.toLowerCase());
      const bookName = context.query.match(/[123]*[A-z]{3,}/).first();
      const numbersPartsOfQueryString = context.query.substring(2 + bookName.length);
      const numbers = numbersPartsOfQueryString.split(/[-:]+/);
      const chapterNumber = parseInt(numbers[0]);
      const verseNumber = parseInt(numbers[1]);
      const verseEndNumber = numbers.length === 3 ? parseInt(numbers[2]) : void 0;
      const suggestingVerse = new SuggestingVerse(bookName, chapterNumber, verseNumber, verseEndNumber);
      console.debug(bookName, chapterNumber, verseNumber, verseEndNumber, suggestingVerse);
      yield suggestingVerse.fetchAndSetVersesText();
      return [suggestingVerse];
    });
  }
  renderSuggestion(suggestion, el) {
    const outer = el.createDiv({ cls: "obr-suggester-container" });
    outer.createDiv({ cls: "obr-shortcode" }).setText(suggestion.text);
  }
  selectSuggestion(suggestion) {
    if (this.context) {
      this.context.editor.replaceRange(`> ${suggestion.text + `>> ${suggestion.getVerseReference()}`}`, this.context.start, this.context.end);
    }
  }
};

// main.ts
var BibleReferencePlugin = class extends import_obsidian2.Plugin {
  onload() {
    return __async(this, null, function* () {
      console.log("loading plugin -", APP_NAMING.appName);
      yield this.loadSettings();
      this.registerEditorSuggest(new VerseSuggester(this));
    });
  }
  onunload() {
    console.log("unloading plugin", APP_NAMING.appName);
  }
  loadSettings() {
    return __async(this, null, function* () {
      this.settings = Object.assign({}, DEFAULT_SETTINGS, yield this.loadData());
    });
  }
  saveSettings() {
    return __async(this, null, function* () {
      yield this.saveData(this.settings);
    });
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyIsICJzcmMvY29uc3RhbnRzLnRzIiwgInNyYy9WZXJzZVN1Z2dlc3Rlci50cyIsICJzcmMvVmVyc2VUeXBvQ2hlY2sudHMiLCAic3JjL1N1Z2dlc3RpbmdWZXJzZS50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgTm90aWNlLCBQbHVnaW4gfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IEFQUF9OQU1JTkcsIEJpYmxlUmVmZXJlbmNlUGx1Z2luU2V0dGluZ3MsIERFRkFVTFRfU0VUVElOR1MgfSBmcm9tICcuL3NyYy9jb25zdGFudHMnO1xyXG5pbXBvcnQgeyBCaWJsZVJlZmVyZW5jZVNldHRpbmdUYWIgfSBmcm9tICcuL3NyYy9CaWJsZVJlZmVyZW5jZVNldHRpbmdUYWInO1xyXG5pbXBvcnQgeyBWZXJzZVN1Z2dlc3RlciB9IGZyb20gJy4vc3JjL1ZlcnNlU3VnZ2VzdGVyJztcclxuXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCaWJsZVJlZmVyZW5jZVBsdWdpbiBleHRlbmRzIFBsdWdpbiB7XHJcbiAgc2V0dGluZ3M6IEJpYmxlUmVmZXJlbmNlUGx1Z2luU2V0dGluZ3M7XHJcblxyXG4gIGFzeW5jIG9ubG9hZCgpIHtcclxuICAgIGNvbnNvbGUubG9nKCdsb2FkaW5nIHBsdWdpbiAtJywgQVBQX05BTUlORy5hcHBOYW1lKTtcclxuXHJcbiAgICBhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xyXG5cclxuICAgIC8vIHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgQmlibGVSZWZlcmVuY2VTZXR0aW5nVGFiKHRoaXMuYXBwLCB0aGlzKSk7IC8vIHRvZG8gZW5hYmxlIHRoZSBzZXR0aW5nIHRhYlxyXG5cclxuICAgIHRoaXMucmVnaXN0ZXJFZGl0b3JTdWdnZXN0KG5ldyBWZXJzZVN1Z2dlc3Rlcih0aGlzKSk7XHJcbiAgfVxyXG5cclxuICBvbnVubG9hZCgpIHtcclxuICAgIGNvbnNvbGUubG9nKCd1bmxvYWRpbmcgcGx1Z2luJywgQVBQX05BTUlORy5hcHBOYW1lKTtcclxuICB9XHJcblxyXG4gIGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcclxuICAgIHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCBhd2FpdCB0aGlzLmxvYWREYXRhKCkpO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgc2F2ZVNldHRpbmdzKCkge1xyXG4gICAgYXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcclxuICB9XHJcbn1cclxuIiwgImV4cG9ydCBjb25zdCBBUFBfTkFNSU5HID0ge1xuICBhcHBOYW1lOiAnQmlibGUgUmVmZXJlbmNlJyxcbiAgYXBwQXV0aG9yOiAndGltLWh1YicsXG4gIGFwcFVybDogJycsXG4gIGRlZmF1bHRTdGF0dXM6ICcnLFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJpYmxlUmVmZXJlbmNlUGx1Z2luU2V0dGluZ3Mge1xuICBsYW5ndWFnZTogc3RyaW5nO1xuICB2ZXJzaW9uOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBjb25zdCBERUZBVUxUX1NFVFRJTkdTOiBCaWJsZVJlZmVyZW5jZVBsdWdpblNldHRpbmdzID0ge1xuICBsYW5ndWFnZTogJ2VuJyxcbiAgdmVyc2lvbjogJ1dFQicgLy9Xb3JsZCBFbmdsaXNoIEJpYmxlXG59XG4iLCAiaW1wb3J0IHsgRWRpdG9yLCBFZGl0b3JQb3NpdGlvbiwgRWRpdG9yU3VnZ2VzdCwgRWRpdG9yU3VnZ2VzdENvbnRleHQsIEVkaXRvclN1Z2dlc3RUcmlnZ2VySW5mbywgVEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgQmlibGVSZWZlcmVuY2VQbHVnaW4gZnJvbSAnLi4vbWFpbic7XG5pbXBvcnQgeyBWZXJzZVR5cG9DaGVjayB9IGZyb20gJy4vVmVyc2VUeXBvQ2hlY2snO1xuaW1wb3J0IHsgU3VnZ2VzdGluZ1ZlcnNlIH0gZnJvbSAnLi9TdWdnZXN0aW5nVmVyc2UnO1xuXG4vKipcbiAqIEV4dGVuZCB0aGUgRWRpdG9yU3VnZ2VzdCB0byBzdWdnZXN0IGJpYmxlIHZlcnNlcy5cbiAqL1xuZXhwb3J0IGNsYXNzIFZlcnNlU3VnZ2VzdGVyIGV4dGVuZHMgRWRpdG9yU3VnZ2VzdDxTdWdnZXN0aW5nVmVyc2U+IHtcbiAgcGx1Z2luOiBCaWJsZVJlZmVyZW5jZVBsdWdpbjtcblxuICBjb25zdHJ1Y3RvcihwbHVnaW46IEJpYmxlUmVmZXJlbmNlUGx1Z2luKSB7XG4gICAgc3VwZXIocGx1Z2luLmFwcCk7XG4gICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gIH1cblxuICAvKipcbiAgICogVGhpcyB3aWxsIGJ1aWxkIHRoZSBFZGl0b3JTdWdnZXN0Q29udGV4dCBpbiBnZXRTdWdnZXN0aW9uc1xuICAgKiBAcGFyYW0gY3Vyc29yXG4gICAqIEBwYXJhbSBlZGl0b3JcbiAgICogQHBhcmFtIF9cbiAgICovXG4gIG9uVHJpZ2dlcihjdXJzb3I6IEVkaXRvclBvc2l0aW9uLCBlZGl0b3I6IEVkaXRvciwgXzogVEZpbGUpOiBFZGl0b3JTdWdnZXN0VHJpZ2dlckluZm8gfCBudWxsIHtcbiAgICBjb25zdCBjdXJyZW50Q29udGVudCA9IGVkaXRvci5nZXRMaW5lKGN1cnNvci5saW5lKS5zdWJzdHJpbmcoMCwgY3Vyc29yLmNoKTtcbiAgICBjb25zdCBtYXRjaCA9IFZlcnNlVHlwb0NoZWNrKGN1cnJlbnRDb250ZW50KTtcbiAgICBpZiAobWF0Y2gpIHtcbiAgICAgIGNvbnNvbGUuZGVidWcoJ3RyaWdnZXIgb24nLCBjdXJyZW50Q29udGVudCk7XG4gICAgICBjb25zdCBlZGl0b3JTdWdnZXN0VHJpZ2dlckluZm86RWRpdG9yU3VnZ2VzdFRyaWdnZXJJbmZvID0ge1xuICAgICAgICBlbmQ6IGN1cnNvcixcbiAgICAgICAgc3RhcnQ6IHtcbiAgICAgICAgICBsaW5lOiBjdXJzb3IubGluZSxcbiAgICAgICAgICBjaDogY3VycmVudENvbnRlbnQubGFzdEluZGV4T2YobWF0Y2gpLFxuICAgICAgICB9LFxuICAgICAgICBxdWVyeTogbWF0Y2gsXG4gICAgICB9O1xuICAgICAgcmV0dXJuIGVkaXRvclN1Z2dlc3RUcmlnZ2VySW5mbztcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvKipcbiAgICogU3VnZ2VzdCBiaWJsZSB2ZXJzZXMuXG4gICAqIEBwYXJhbSBjb250ZXh0XG4gICAqL1xuICBhc3luYyBnZXRTdWdnZXN0aW9ucyhjb250ZXh0OiBFZGl0b3JTdWdnZXN0Q29udGV4dCk6IFByb21pc2U8U3VnZ2VzdGluZ1ZlcnNlW10+IHtcbiAgICBjb25zb2xlLmRlYnVnKCdnZXQgc3VnZ2VzdGlvbiBmb3IgcXVlcnkgJywgY29udGV4dC5xdWVyeS50b0xvd2VyQ2FzZSgpKTtcblxuICAgIGNvbnN0IGJvb2tOYW1lID0gY29udGV4dC5xdWVyeS5tYXRjaCgvWzEyM10qW0Etel17Myx9LykuZmlyc3QoKTtcblxuICAgIGNvbnN0IG51bWJlcnNQYXJ0c09mUXVlcnlTdHJpbmcgPSBjb250ZXh0LnF1ZXJ5LnN1YnN0cmluZygyK2Jvb2tOYW1lLmxlbmd0aCk7XG4gICAgY29uc3QgbnVtYmVycyA9IG51bWJlcnNQYXJ0c09mUXVlcnlTdHJpbmcuc3BsaXQoL1stOl0rLyk7XG5cbiAgICBjb25zdCBjaGFwdGVyTnVtYmVyID0gcGFyc2VJbnQobnVtYmVyc1swXSk7XG4gICAgY29uc3QgdmVyc2VOdW1iZXIgPSBwYXJzZUludChudW1iZXJzWzFdKTtcbiAgICBjb25zdCB2ZXJzZUVuZE51bWJlciA9IG51bWJlcnMubGVuZ3RoID09PSAzID8gcGFyc2VJbnQobnVtYmVyc1syXSkgOiB1bmRlZmluZWQ7XG5cbiAgICAvLyB0b2RvIGdldCB2ZXJzaW9uIGFuZCBsYW5ndWFnZSBmcm9tIHNldHRpbmdzXG4gICAgY29uc3Qgc3VnZ2VzdGluZ1ZlcnNlID0gbmV3IFN1Z2dlc3RpbmdWZXJzZShib29rTmFtZSwgY2hhcHRlck51bWJlciwgdmVyc2VOdW1iZXIsIHZlcnNlRW5kTnVtYmVyKTtcblxuICAgIGNvbnNvbGUuZGVidWcoYm9va05hbWUsIGNoYXB0ZXJOdW1iZXIsIHZlcnNlTnVtYmVyLCB2ZXJzZUVuZE51bWJlciwgc3VnZ2VzdGluZ1ZlcnNlKTtcbiAgICBhd2FpdCBzdWdnZXN0aW5nVmVyc2UuZmV0Y2hBbmRTZXRWZXJzZXNUZXh0KCk7XG4gICAgcmV0dXJuIFtzdWdnZXN0aW5nVmVyc2VdO1xuICB9XG5cbiAgcmVuZGVyU3VnZ2VzdGlvbihzdWdnZXN0aW9uOiBTdWdnZXN0aW5nVmVyc2UsIGVsOiBIVE1MRWxlbWVudCk6IHZvaWQge1xuICAgIGNvbnN0IG91dGVyID0gZWwuY3JlYXRlRGl2KHsgY2xzOiBcIm9ici1zdWdnZXN0ZXItY29udGFpbmVyXCIgfSk7XG4gICAgb3V0ZXIuY3JlYXRlRGl2KHsgY2xzOiBcIm9ici1zaG9ydGNvZGVcIiB9KS5zZXRUZXh0KHN1Z2dlc3Rpb24udGV4dCk7XG4gIH1cblxuICBzZWxlY3RTdWdnZXN0aW9uKHN1Z2dlc3Rpb246IFN1Z2dlc3RpbmdWZXJzZSk6IHZvaWQge1xuICAgIGlmKHRoaXMuY29udGV4dCkge1xuICAgICAgKHRoaXMuY29udGV4dC5lZGl0b3IgYXMgRWRpdG9yKS5yZXBsYWNlUmFuZ2UoXG4gICAgICAgIGA+ICR7c3VnZ2VzdGlvbi50ZXh0K2A+PiAke3N1Z2dlc3Rpb24uZ2V0VmVyc2VSZWZlcmVuY2UoKX1gfWAsXG4gICAgICAgIHRoaXMuY29udGV4dC5zdGFydCwgdGhpcy5jb250ZXh0LmVuZFxuICAgICAgKTtcbiAgICB9XG4gIH1cbn1cbiIsICIvKipcbiAqIHJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCB2ZXJzZU51bWJlclxuICpcbiAqIC0tIEpvaG4gMToxXG4gKiAtLSBKb2ggMVxuICogLS0gSm9oIDEyMzoxLTNcbiAqIC0tIDEgQ29sIDE6MS0xNVxuICovXG5jb25zdCByZWcgPSAvXFwtezJ9KChbMTIzXSkqKShcXHd7Myx9KVxcK1xcZHswLDN9XFw6KlxcZHswLDN9XFwtKlxcZHswLDN9JC87XG5cbi8qKlxuICogcmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoXG4gKiAtLUpvaG4xMjoxLTNcbiAqIC0tSm9objE6MVxuICovXG5jb25zdCBzaG9ydFJlZyA9IC9cXC17Mn0oWzEyM10pKltBLXpdezMsfVxcZHsxLDN9XFw6XFxkezEsM30oXFwtXFxkezEsM30pKi87XG5cbi8qKlxuICogY2hlY2sgaWYgdGhlIGdpdmVuIHN0cmluZyBjb250YWlucyBhIHZlcnNlTnVtYmVyLCBhbmQgcmV0dXJuIHRoZSB2ZXJzZU51bWJlciBpZiBpdCBkb2VzXG4gKiBAcGFyYW0gdmVyc2VcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5leHBvcnQgY29uc3QgVmVyc2VUeXBvQ2hlY2sgPSAodmVyc2U6IHN0cmluZyk6IHN0cmluZyA9PiB7XG4gICAgcmV0dXJuIHZlcnNlLm1hdGNoKHNob3J0UmVnKT8uZmlyc3QoKTtcbn1cbiIsICJleHBvcnQgaW50ZXJmYWNlIElWZXJzZSB7XG4gIGJvb2tfaWQ6IHN0cmluZztcbiAgYm9va19uYW1lOiBzdHJpbmc7XG4gIGNoYXB0ZXI6IG51bWJlcjtcbiAgdmVyc2U6IG51bWJlcjtcbiAgdGV4dDogc3RyaW5nO1xufVxuXG4vKipcbiAqIEdldCBwdWJsaWMgV29ybGQgRW5nbGlnaCBCaWJsZSB2ZXJzaW9uXG4gKi9cbmV4cG9ydCBjbGFzcyBTdWdnZXN0aW5nVmVyc2Uge1xuICBwdWJsaWMgdGV4dDogc3RyaW5nO1xuICBwdWJsaWMgdmVyc2lvbjogc3RyaW5nO1xuICBwdWJsaWMgbGFuZ3VhZ2UgOnN0cmluZztcblxuICBjb25zdHJ1Y3RvcihwdWJsaWMgYm9va05hbWU6IHN0cmluZywgcHVibGljIGNoYXB0ZXJOdW1iZXI6IG51bWJlciwgcHVibGljIHZlcnNlTnVtYmVyOiBudW1iZXIsIHB1YmxpYyB2ZXJzZU51bWJlckVuZD86IG51bWJlciwgdmVyc2lvbiA9ICd3ZWInLCAgbGFuZ3VhZ2UgPSAnZW4nKSB7XG4gICAgdGhpcy5ib29rTmFtZSA9IGJvb2tOYW1lO1xuICAgIHRoaXMuY2hhcHRlck51bWJlciA9IGNoYXB0ZXJOdW1iZXI7XG4gICAgdGhpcy52ZXJzZU51bWJlciA9IHZlcnNlTnVtYmVyO1xuICAgIHRoaXMudmVyc2VOdW1iZXJFbmQgPSB2ZXJzZU51bWJlckVuZDtcblxuICAgIHRoaXMudmVyc2lvbiA9IHZlcnNpb247XG4gICAgdGhpcy5sYW5ndWFnZSA9IGxhbmd1YWdlO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgdmVyc2UgdGV4dFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcHJpdmF0ZSBnZXQgcXVlcnlTdHJpbmcoKTpzdHJpbmcge1xuICAgIGxldCBxdWVyeVN0cmluZyA9IGAke3RoaXMuYm9va05hbWV9KyR7dGhpcy5jaGFwdGVyTnVtYmVyfTpgO1xuICAgIGlmICh0aGlzPy52ZXJzZU51bWJlckVuZCA+IDApIHtcbiAgICAgIHF1ZXJ5U3RyaW5nICs9IGAke3RoaXMudmVyc2VOdW1iZXJ9LSR7dGhpcy52ZXJzZU51bWJlckVuZH1gO1xuICAgIH0gZWxzZSB7XG4gICAgICBxdWVyeVN0cmluZyArPSBgJHt0aGlzLnZlcnNlTnVtYmVyfWA7XG4gICAgfVxuICAgIHJldHVybiBxdWVyeVN0cmluZztcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZ2V0VmVyc2VzKCk6IFByb21pc2U8SVZlcnNlW10+IHtcbiAgICBjb25zdCB1cmwgPSBgaHR0cHM6Ly9iaWJsZS1hcGkuY29tLyR7dGhpcy5xdWVyeVN0cmluZ31gO1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsKTtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIHJldHVybiBkYXRhLnZlcnNlcztcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBmZXRjaEFuZFNldFZlcnNlc1RleHQoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgLy8gdG9kbyBhZGQgYSBjYWNoaW5nIGhlcmVcblxuICAgIGNvbnN0IHZlcnNlcyA9IGF3YWl0IHRoaXMuZ2V0VmVyc2VzKCk7XG4gICAgbGV0IHRleHQgPSAnJztcbiAgICB2ZXJzZXMuZm9yRWFjaCh2ZXJzZSA9PiB7XG4gICAgICB0ZXh0ICs9IHZlcnNlLnRleHQ7XG4gICAgfSk7XG4gICAgdGhpcy50ZXh0ID0gdGV4dDtcbiAgfVxuXG4gIHB1YmxpYyBnZXRWZXJzZVJlZmVyZW5jZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiBgLS0gJHt0aGlzLmJvb2tOYW1lfSAke3RoaXMuY2hhcHRlck51bWJlcn06JHt0aGlzLnZlcnNlTnVtYmVyfSR7dGhpcy52ZXJzZU51bWJlckVuZD8gYC0ke3RoaXMudmVyc2VOdW1iZXJFbmR9YDonJ31gO1xuICB9XG59XG4iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBLHVCQUErQjs7O0FDQXhCLElBQU0sYUFBYTtBQUFBLEVBQ3hCLFNBQVM7QUFBQSxFQUNULFdBQVc7QUFBQSxFQUNYLFFBQVE7QUFBQSxFQUNSLGVBQWU7QUFBQTtBQVFWLElBQU0sbUJBQWlEO0FBQUEsRUFDNUQsVUFBVTtBQUFBLEVBQ1YsU0FBUztBQUFBOzs7QUNkWCxzQkFBNkc7OztBQ2U3RyxJQUFNLFdBQVc7QUFPVixJQUFNLGlCQUFpQixDQUFDLFVBQTBCO0FBdEJ6RDtBQXVCSSxTQUFPLFlBQU0sTUFBTSxjQUFaLG1CQUF1QjtBQUFBOzs7QUNaM0IsNEJBQXNCO0FBQUEsRUFLM0IsWUFBbUIsVUFBeUIsZUFBOEIsYUFBNEIsZ0JBQXlCLFVBQVUsT0FBUSxXQUFXLE1BQU07QUFBL0k7QUFBeUI7QUFBOEI7QUFBNEI7QUFDcEcsU0FBSyxXQUFXO0FBQ2hCLFNBQUssZ0JBQWdCO0FBQ3JCLFNBQUssY0FBYztBQUNuQixTQUFLLGlCQUFpQjtBQUV0QixTQUFLLFVBQVU7QUFDZixTQUFLLFdBQVc7QUFBQTtBQUFBLE1BT04sY0FBcUI7QUFDL0IsUUFBSSxjQUFjLEdBQUcsS0FBSyxZQUFZLEtBQUs7QUFDM0MsUUFBSSw4QkFBTSxr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
